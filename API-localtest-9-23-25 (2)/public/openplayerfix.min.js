!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openplayerjs=t():e.openplayerjs=t()}(this,(function(){return function(){var e={591:function(e,t,i){var n=i(8).default;function s(){"use strict";e.exports=s=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",f=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,n){var s=t&&t.prototype instanceof v?t:v,a=Object.create(s.prototype),r=new M(n||[]);return a._invoke=function(e,t,i){var n="suspendedStart";return function(s,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw a;return C()}for(i.method=s,i.arg=a;;){var r=i.delegate;if(r){var o=_(r,i);if(o){if(o===h)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=d(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,r),a}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h={};function v(){}function p(){}function m(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==i&&a.call(b,o)&&(y=b);var E=m.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function i(s,r,o,l){var f=d(e[s],e,r);if("throw"!==f.type){var c=f.arg,u=c.value;return u&&"object"==n(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(f.arg)}var s;this._invoke=function(e,n){function a(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(a,a):a()}}function _(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,c(E,"constructor",m),c(m,"constructor",p),p.displayName=c(m,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,f,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,i,n,s,a){void 0===a&&(a=Promise);var r=new k(u(e,i,n,s),a);return t.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(E),c(E,f,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var o=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;L(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:T(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:function(e,t,i){var n=i(591)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i.r(n),i.d(n,{default:function(){return Yn}});var o=i(757),l=i.n(o);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u="undefined"!=typeof window?window.navigator:null,d=u?u.userAgent.toLowerCase():null,h=(!!d&&(/ipad/i.test(d)&&window.MSStream),!!d&&(/iphone/i.test(d)&&!window.MSStream)),v=(!!d&&(/ipod/i.test(d)&&window.MSStream),!!d&&(/ipad|iphone|ipod/i.test(d)&&!window.MSStream)),p=!!d&&/android/i.test(d),m=(!!u&&("msLaunchUri"in u&&document),!!d&&/chrome/i.test(d)),y=(!!d&&/firefox/i.test(d),!!d&&(/safari/i.test(d)&&!m)),g=(!!d&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(d),"undefined"!=typeof window&&"MediaSource"in window),b={passive:!1};function E(e){return"video"===e.tagName.toLowerCase()}function w(e){return"audio"===e.tagName.toLowerCase()}function k(e){return new Promise((function(t,i){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){n.remove(),t()},n.onerror=function(){n.remove(),i(new Error("".concat(e," could not be loaded")))},document.head&&document.head.appendChild(n)}))}function _(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function A(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new DOMParser,n=i.parseFromString(e,"text/html"),s=n.body||document.createElement("body"),a=s.querySelectorAll("script"),r=0,o=a.length;r<o;r++)a[r].remove();var l=function e(t){for(var i=t.children,n=0,s=i.length;n<s;n++){for(var a=i[n],r=a.attributes,o=0,l=r.length;o<l;o++){var f=r[o],c=f.name,u=f.value.replace(/\s+/g,"").toLowerCase();["src","href","xlink:href"].includes(c)&&(u.includes("javascript:")||u.includes("data:"))&&a.removeAttribute(c),c.startsWith("on")&&a.removeAttribute(c)}e(a)}};return l(s),t?(s.textContent||"").replace(/\s{2,}/g,""):s.innerHTML}function L(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===t(e)&&null!==e}function M(e,t){var i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function T(e,t){var i=Math.floor(e%1*(t||0)),n=Math.floor(e),s=Math.floor(n/60),a=Math.floor(s/60),r=function(e){var t=e.toString();return e<10?e<=0?"00":"0".concat(t):t};return s%=60,n%=60,"".concat(a>0?"".concat(r(a),":"):"").concat(r(s),":").concat(r(n)).concat(i?":".concat(r(i)):"")}function C(e){var t=e.replace(/;/g,":").split(":"),i=0;return 3===t.length?(i+=60*parseFloat(t[0])*60,i+=60*parseFloat(t[1]),i+=parseFloat(t[2])):(i+=60*parseFloat(t[0]),i+=parseFloat(t[1])),i}var S,O,x,P,j,W,R,N,I,D,F,B,q,H=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},K=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},V=function(){function e(t,i,n){s(this,e),S.set(this,void 0),O.set(this,void 0),x.set(this,void 0),P.set(this,void 0),j.set(this,{button:{},global:{},media:{}}),W.set(this,{}),R.set(this,void 0),N.set(this,{}),I.set(this,void 0),D.set(this,void 0),F.set(this,"off"),B.set(this,void 0),q.set(this,void 0),H(this,S,t,"f"),H(this,B,i,"f"),H(this,q,n,"f"),this._getCuesFromText=this._getCuesFromText.bind(this),this._getNativeCues=this._getNativeCues.bind(this),this._displayCaptions=this._displayCaptions.bind(this),this._hideCaptions=this._hideCaptions.bind(this),this._search=this._search.bind(this),this._prepareTrack=this._prepareTrack.bind(this),this._formatMenuItems=this._formatMenuItems.bind(this)}return r(e,[{key:"create",value:function(){for(var e=this,t=K(this,S,"f").getElement().textTracks,i=[],n=0,s=t.length;n<s;n++){var a=['track[kind="subtitles"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]'),'track[kind="captions"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]')];K(this,S,"f").getElement().querySelector(a.join(", "))&&i.push(t[n])}if(!i.length)for(var r=0,o=t.length;r<o;r++)i.push(t[r]);if(H(this,R,i,"f"),H(this,I,!!K(this,R,"f").length,"f"),K(this,I,"f")){var l=K(this,S,"f").getOptions(),f=l.labels,u=l.detachMenus;H(this,O,document.createElement("button"),"f"),K(this,O,"f").className="op-controls__captions op-control__".concat(K(this,B,"f")),K(this,O,"f").tabIndex=0,K(this,O,"f").title=(null==f?void 0:f.toggleCaptions)||"",K(this,O,"f").setAttribute("aria-controls",K(this,S,"f").id),K(this,O,"f").setAttribute("aria-pressed","false"),K(this,O,"f").setAttribute("aria-label",(null==f?void 0:f.toggleCaptions)||""),K(this,O,"f").setAttribute("data-active-captions","off"),u&&(K(this,O,"f").classList.add("op-control--no-hover"),H(this,P,document.createElement("div"),"f"),K(this,P,"f").className="op-settings op-captions__menu",K(this,P,"f").setAttribute("aria-hidden","true"),K(this,P,"f").innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===K(this,F,"f")?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(null==f?void 0:f.off,"</div>\n                </div>\n            </div>"));var d=function(t,i,n){var s,a,r=i[t];if("subtitles"===r.kind||"captions"===r.kind){r.default&&(H(e,F,r.srclang,"f"),K(e,O,"f").setAttribute("data-active-captions",r.srclang));var o=(s=r.src,(a=document.createElement("a")).href=s,a.href),l=K(e,R,"f")[t];l&&l.language===r.srclang&&(l.cues&&l.cues.length>0?(K(e,W,"f")[r.srclang]=e._getNativeCues(K(e,R,"f")[t]),e._prepareTrack(t,r.srclang,o,r.default||!1)):fetch(o).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((function(i){K(e,W,"f")[r.srclang]=e._getCuesFromText(i),e._prepareTrack(t,r.srclang,o,r.default||!1);var n='.op-subtitles__option[data-value="captions-'.concat(K(e,R,"f")[t].language,'"]');if(K(e,P,"f")&&!K(e,P,"f").querySelector(n)){var s=document.createElement("div"),a=(null==f?void 0:f.lang)?f.lang[K(e,R,"f")[t].language]:null;s.className="op-settings__submenu-item",s.tabIndex=0,s.setAttribute("role","menuitemradio"),s.setAttribute("aria-checked",K(e,F,"f")===K(e,R,"f")[t].language?"true":"false"),s.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(K(e,R,"f")[t].language,'">\n                                        ').concat(a||K(e,R,"f")[t].label,"\n                                    </div>"),K(e,P,"f").appendChild(s)}})))}},h=(n=0,K(this,S,"f").getElement().querySelectorAll("track"));for(s=h.length;n<s;n++)d(n,h);H(this,x,document.createElement("div"),"f"),K(this,x,"f").className="op-captions",K(this,x,"f").innerHTML="<span></span>";var m=K(this,x,"f").querySelector("span");if(K(this,j,"f").media.timeupdate=function(){if(K(e,S,"f").isMedia())if(K(e,D,"f")){var t=K(e,W,"f")[K(e,D,"f").language];if(m&&void 0!==t){var i=e._search(t,K(e,S,"f").getMedia().currentTime);m.innerHTML="",i>-1&&K(e,O,"f").classList.contains("op-controls__captions--on")?(K(e,x,"f").classList.add("op-captions--on"),m.innerHTML=A(t[i].text,!1)):e._hideCaptions()}}else e._hideCaptions();else e._hideCaptions()},K(this,j,"f").button.click=function(t){var i=t.target;if(u){for(var n=K(e,S,"f").getContainer().querySelectorAll(".op-settings"),s=0,a=n.length;s<a;++s)n[s]!==K(e,P,"f")&&n[s].setAttribute("aria-hidden","true");"true"===K(e,P,"f").getAttribute("aria-hidden")?K(e,P,"f").setAttribute("aria-hidden","false"):K(e,P,"f").setAttribute("aria-hidden","true")}else if(i.setAttribute("aria-pressed","true"),i.classList.contains("op-controls__captions--on"))e._hideCaptions(),i.classList.remove("op-controls__captions--on"),i.setAttribute("data-active-captions","off");else{if(!K(e,D,"f")){var r=c(K(e,R,"f"),1)[0];H(e,D,r,"f")}e._displayCaptions(),i.classList.add("op-controls__captions--on"),i.setAttribute("data-active-captions",K(e,D,"f").language)}},K(this,j,"f").button.mouseover=function(){if(!v&&!p&&u){for(var t=K(e,S,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==K(e,P,"f")&&t[i].setAttribute("aria-hidden","true");"true"===K(e,P,"f").getAttribute("aria-hidden")&&K(e,P,"f").setAttribute("aria-hidden","false")}},K(this,j,"f").button.mouseout=function(){if(!v&&!p&&u){for(var t=K(e,S,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===K(e,P,"f").getAttribute("aria-hidden")&&K(e,P,"f").setAttribute("aria-hidden","true")}},K(this,I,"f")){var y=K(this,S,"f").getContainer();if(y.insertBefore(K(this,x,"f"),y.firstChild),u){var g=document.createElement("div");g.className="op-controls__container op-control__".concat(K(this,B,"f")),g.appendChild(K(this,O,"f")),g.appendChild(K(this,P,"f")),K(this,S,"f").getControls().getLayer(K(this,q,"f")).appendChild(g)}else K(this,S,"f").getControls().getLayer(K(this,q,"f")).appendChild(K(this,O,"f"));K(this,O,"f").addEventListener("click",K(this,j,"f").button.click,b)}K(this,R,"f").length<=1&&!u||!K(this,R,"f").length&&u||(K(this,j,"f").global.click=function(t){var i=t.target;if(i.closest("#".concat(K(e,S,"f").id))&&i.classList.contains("op-subtitles__option")){var n=i.getAttribute("data-value"),s=n?n.replace("captions-",""):"",a=Array.from(K(e,R,"f")).filter((function(e){return e.language===s}));if(H(e,D,a?a.pop():void 0,"f"),u){if(K(e,O,"f").classList.contains("op-controls__captions--on")?(e._hideCaptions(),K(e,O,"f").classList.remove("op-controls__captions--on"),K(e,O,"f").setAttribute("data-active-captions","off")):(e._displayCaptions(),K(e,O,"f").classList.add("op-controls__captions--on"),K(e,O,"f").setAttribute("data-active-captions",s)),i.parentElement&&i.parentElement.parentElement)for(var r=i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),o=0,l=r.length;o<l;++o)r[o].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),K(e,P,"f").setAttribute("aria-hidden","false")}else e._displayCaptions(),K(e,O,"f").setAttribute("data-active-captions",s);var f=M("captionschanged");K(e,S,"f").getElement().dispatchEvent(f)}},u&&(K(this,O,"f").addEventListener("mouseover",K(this,j,"f").button.mouseover,b),K(this,P,"f").addEventListener("mouseover",K(this,j,"f").button.mouseover,b),K(this,P,"f").addEventListener("mouseout",K(this,j,"f").button.mouseout,b),K(this,S,"f").getElement().addEventListener("controlshidden",K(this,j,"f").button.mouseout,b)),void 0!==K(this,j,"f").global.click&&document.addEventListener("click",K(this,j,"f").global.click,b))}}},{key:"destroy",value:function(){var e=K(this,S,"f").getOptions().detachMenus;void 0!==K(this,j,"f").global.click&&document.removeEventListener("click",K(this,j,"f").global.click),K(this,I,"f")&&(K(this,O,"f").removeEventListener("click",K(this,j,"f").button.click),e&&(K(this,O,"f").removeEventListener("mouseover",K(this,j,"f").button.mouseover),K(this,P,"f").removeEventListener("mouseover",K(this,j,"f").button.mouseover),K(this,P,"f").removeEventListener("mouseout",K(this,j,"f").button.mouseout),K(this,S,"f").getElement().removeEventListener("controlshidden",K(this,j,"f").button.mouseout),K(this,P,"f").remove()),K(this,S,"f").getElement().removeEventListener("timeupdate",K(this,j,"f").media.timeupdate),K(this,O,"f").remove(),K(this,x,"f").remove())}},{key:"addSettings",value:function(){var e=K(this,S,"f").getOptions(),t=e.detachMenus,i=e.labels;if(t||K(this,R,"f").length<=1)return{};var n=this._formatMenuItems();return n.length>2?{className:"op-subtitles__option",default:K(this,F,"f")||"off",key:"captions",name:(null==i?void 0:i.captions)||"",subitems:n}:{}}},{key:"_getCuesFromText",value:function(e){var t=e.split(/\r?\n/),i=[],n=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;for(var s,a=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$"),r=0,o=t.length;r<o;r++){var l=a.exec(t[r]);if(l&&r<t.length){r-1>=0&&""!==t[r-1]&&(s=t[r-1]);var f=t[++r];for(r++;""!==t[r]&&r<t.length;)f="".concat(f,"\n").concat(t[r]),r++;f=f.trim().replace(n,"<a href='$1' target='_blank'>$1</a>");var c=C(l[1]);i.push({endTime:C(l[3]),identifier:s||"",settings:L(l[5])?JSON.parse(l[5]):{},startTime:0===c?.2:c,text:f})}s=""}return i}},{key:"_getNativeCues",value:function(e){var t=[],i=e.cues;return Object.keys(i).forEach((function(e){var n=parseInt(e,10),s=i[n];t.push({endTime:s.endTime,identifier:s.id,settings:{},startTime:s.startTime,text:s.text})})),t}},{key:"_displayCaptions",value:function(){if(K(this,x,"f")&&K(this,D,"f")&&void 0!==K(this,D,"f").cues){var e=K(this,x,"f").querySelector("span");e&&(e.innerHTML=""),K(this,S,"f").getElement().addEventListener("timeupdate",K(this,j,"f").media.timeupdate,b)}}},{key:"_hideCaptions",value:function(){K(this,x,"f").classList.remove("op-captions--on"),K(this,D,"f")||(K(this,O,"f").classList.remove("op-controls__captions--on"),K(this,O,"f").setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,a=e[s].startTime,r=e[s].endTime;if(t>=a&&t<r)return s;a<t?i=s+1:a>t&&(n=s-1)}return-1}},{key:"_prepareTrack",value:function(e,t,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];K(this,N,"f")[t]=i,K(this,R,"f")[e].mode="disabled",s&&(H(this,F,t,"f"),K(this,O,"f").classList.add("op-controls__captions--on"),K(this,O,"f").setAttribute("data-active-captions",t),H(this,D,Array.from(K(this,R,"f")).filter((function(e){return e.language===K(n,F,"f")})).pop(),"f"),this._displayCaptions(),K(this,S,"f").getContainer().classList.contains("op-captions--detected")||K(this,S,"f").getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var e=this,t=K(this,S,"f").getOptions().labels,i=[{key:"off",label:(null==t?void 0:t.off)||""}],n=function(n,s){var a=K(e,R,"f")[n],r=(null==t?void 0:t.lang)?t.lang[a.language]:null;(i=i.filter((function(e){return e.key!==a.language}))).push({key:a.language,label:r||K(e,R,"f")[n].label})},s=0,a=K(this,R,"f").length;s<a;s++)n(s);return i}}]),e}();S=new WeakMap,O=new WeakMap,x=new WeakMap,P=new WeakMap,j=new WeakMap,W=new WeakMap,R=new WeakMap,N=new WeakMap,I=new WeakMap,D=new WeakMap,F=new WeakMap,B=new WeakMap,q=new WeakMap;var z,U,G,Q,$,J,Y,X,Z,ee=V,te=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ie=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ne=function(){function e(t,i,n){var a=this;s(this,e),z.set(this,void 0),U.set(this,void 0),G.set(this,void 0),Q.set(this,[]),$.set(this,0),J.set(this,0),Y.set(this,void 0),X.set(this,void 0),Z.set(this,void 0),te(this,z,t,"f"),te(this,X,i,"f"),te(this,Z,n,"f"),te(this,U,document.body.classList.contains("op-fullscreen__on"),"f");var r=document;this.fullScreenEnabled=!!(r.fullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled||r.webkitSupportsFullscreen||r.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this),this._resize=this._resize.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),this._setFullscreen=this._setFullscreen.bind(this),this._unsetFullscreen=this._unsetFullscreen.bind(this),te(this,Q,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],"f"),ie(this,Q,"f").forEach((function(e){document.addEventListener(e,a._fullscreenChange,b)})),this._setFullscreenData(!1),ie(this,z,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,b),h&&(ie(this,z,"f").getElement().addEventListener("webkitbeginfullscreen",this._setFullscreen,b),ie(this,z,"f").getElement().addEventListener("webkitendfullscreen",this._unsetFullscreen,b))}return r(e,[{key:"create",value:function(){var e=this,t=ie(this,z,"f").getOptions().labels;te(this,G,document.createElement("button"),"f"),ie(this,G,"f").type="button",ie(this,G,"f").className="op-controls__fullscreen op-control__".concat(ie(this,X,"f")),ie(this,G,"f").tabIndex=0,ie(this,G,"f").title=(null==t?void 0:t.fullscreen)||"",ie(this,G,"f").setAttribute("aria-controls",ie(this,z,"f").id),ie(this,G,"f").setAttribute("aria-pressed","false"),ie(this,G,"f").setAttribute("aria-label",(null==t?void 0:t.fullscreen)||""),te(this,Y,(function(){ie(e,G,"f").setAttribute("aria-pressed","true"),e.toggleFullscreen()}),"f"),te(this,Y,ie(this,Y,"f").bind(this),"f"),ie(this,G,"f").addEventListener("click",ie(this,Y,"f"),b),ie(this,z,"f").getControls().getLayer(ie(this,Z,"f")).appendChild(ie(this,G,"f"))}},{key:"destroy",value:function(){var e=this;ie(this,z,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),ie(this,Q,"f").forEach((function(t){document.removeEventListener(t,e._fullscreenChange)})),h&&(ie(this,z,"f").getElement().removeEventListener("webkitbeginfullscreen",this._setFullscreen),ie(this,z,"f").getElement().removeEventListener("webkitendfullscreen",this._unsetFullscreen)),ie(this,G,"f").removeEventListener("click",ie(this,Y,"f")),ie(this,G,"f").remove()}},{key:"toggleFullscreen",value:function(){if(ie(this,U,"f")){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=ie(this,z,"f").getElement();te(this,$,window.screen.width,"f"),te(this,J,window.screen.height,"f"),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(p||h)){var i=window.screen;i.orientation&&!ie(this,U,"f")&&i.orientation.lock("landscape")}}},{key:"_fullscreenChange",value:function(){var e=ie(this,U,"f")?void 0:ie(this,$,"f"),t=ie(this,U,"f")?void 0:ie(this,J,"f");this._setFullscreenData(!ie(this,U,"f")),ie(this,z,"f").isAd()&&ie(this,z,"f").getAd().resizeAds(e,t),te(this,U,!ie(this,U,"f"),"f"),ie(this,U,"f")?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){ie(this,z,"f").getContainer().setAttribute("data-fullscreen",(!!e).toString()),ie(this,G,"f")&&(e?ie(this,G,"f").classList.add("op-controls__fullscreen--out"):ie(this,G,"f").classList.remove("op-controls__fullscreen--out"))}},{key:"_resize",value:function(e,t){var i=ie(this,z,"f").getContainer(),n=ie(this,z,"f").getElement(),s=ie(this,z,"f").getOptions(),a="";if(e)i.style.width="100%",n.style.width="100%";else if(s.width){var r="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(r," !important;"),n.style.removeProperty("width")}else n.style.removeProperty("width"),i.style.removeProperty("width");if(t)n.style.height="100%",i.style.height="100%",n.style['max-width']="100vw",i.style['max-width']="100vw";else if(s.height){var o="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(o," !important;"),n.style.removeProperty("height")}else n.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__fullscreen"))||13!==i&&32!==i||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}},{key:"_setFullscreen",value:function(){te(this,U,!0,"f"),this._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}},{key:"_unsetFullscreen",value:function(){te(this,U,!1,"f"),this._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}}]),e}();z=new WeakMap,U=new WeakMap,G=new WeakMap,Q=new WeakMap,$=new WeakMap,J=new WeakMap,Y=new WeakMap,X=new WeakMap,Z=new WeakMap;var se=ne;function ae(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].includes(e.type)}function re(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type}function oe(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].includes(e.type)}function le(e,t){var i=function(e){var t=((((e.split("?")[0]||"").split("\\")||[]).pop()||"").split("/")||[]).pop()||"";return t.includes(".")?t.substring(t.lastIndexOf(".")+1):""}(e);if(!i)return w(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return w(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return w(t)?"audio/webm":"video/webm";case"ogg":return w(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return w(t)?"audio/mp3":"video/mp4"}}var fe,ce,ue,de,he,ve,pe,me,ye=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ge=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},be=function(){function e(t,i,n){s(this,e),fe.set(this,void 0),ce.set(this,void 0),ue.set(this,void 0),de.set(this,{button:{},global:{},media:{}}),he.set(this,[]),ve.set(this,""),pe.set(this,void 0),me.set(this,void 0),ye(this,fe,t,"f"),ye(this,pe,i,"f"),ye(this,me,n,"f")}return r(e,[{key:"create",value:function(){var e=this,t=ge(this,fe,"f").getOptions(),i=t.labels,n=t.defaultLevel,s=t.detachMenus,a=null!==n?parseInt(n||"0",10):ge(this,fe,"f").getMedia().level;ye(this,ve,"".concat(a),"f");var r=this._formatMenuItems(),o=r.length?r.find((function(t){return t.key===ge(e,ve,"f")})):null,l=o?o.label:(null==i?void 0:i.auto)||"",f=!1;ye(this,ce,document.createElement("button"),"f"),ge(this,ce,"f").className="op-controls__levels op-control__".concat(ge(this,pe,"f")),ge(this,ce,"f").tabIndex=0,ge(this,ce,"f").title=(null==i?void 0:i.mediaLevels)||"",ge(this,ce,"f").setAttribute("aria-controls",ge(this,fe,"f").id),ge(this,ce,"f").setAttribute("aria-label",(null==i?void 0:i.mediaLevels)||""),ge(this,ce,"f").setAttribute("data-active-level",ge(this,ve,"f")),ge(this,ce,"f").innerHTML="<span>".concat(l,"</span>");var c=function(){ge(e,he,"f").length?f||(ge(e,fe,"f").getMedia().level=a,f=!0):(e._gatherLevels(),setTimeout((function(){ge(e,fe,"f").getMedia().level=a;var t=M("controlschanged");ge(e,fe,"f").getElement().dispatchEvent(t)}),0))};ge(this,de,"f").media.loadedmetadata=c.bind(this),ge(this,de,"f").media.manifestLoaded=c.bind(this),ge(this,de,"f").media.hlsManifestParsed=c.bind(this),s&&(this._buildMenu(),ge(this,de,"f").button.click=function(){if(s){for(var t=ge(e,fe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==ge(e,ue,"f")&&t[i].setAttribute("aria-hidden","true");"true"===ge(e,ue,"f").getAttribute("aria-hidden")?ge(e,ue,"f").setAttribute("aria-hidden","false"):ge(e,ue,"f").setAttribute("aria-hidden","true")}},ge(this,de,"f").button.mouseover=function(){if(!v&&!p){for(var t=ge(e,fe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==ge(e,ue,"f")&&t[i].setAttribute("aria-hidden","true");"true"===ge(e,ue,"f").getAttribute("aria-hidden")&&ge(e,ue,"f").setAttribute("aria-hidden","false")}},ge(this,de,"f").button.mouseout=function(){if(!v&&!p){for(var t=ge(e,fe,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===ge(e,ue,"f").getAttribute("aria-hidden")&&ge(e,ue,"f").setAttribute("aria-hidden","true")}},ge(this,ce,"f").addEventListener("click",ge(this,de,"f").button.click,b),ge(this,ce,"f").addEventListener("mouseover",ge(this,de,"f").button.mouseover,b),ge(this,ue,"f").addEventListener("mouseover",ge(this,de,"f").button.mouseover,b),ge(this,ue,"f").addEventListener("mouseout",ge(this,de,"f").button.mouseout,b),ge(this,fe,"f").getElement().addEventListener("controlshidden",ge(this,de,"f").button.mouseout,b)),ge(this,de,"f").global.click=function(t){var i=t.target,n=ge(e,fe,"f").getMedia().currentTime,a=ge(e,fe,"f").getMedia().paused;if(i.closest("#".concat(ge(e,fe,"f").id))&&i.classList.contains("op-levels__option")){var r=i.getAttribute("data-value"),o=r?r.replace("levels-",""):"-1";if(ye(e,ve,"".concat(o),"f"),s){ge(e,ce,"f").setAttribute("data-active-level","".concat(o)),ge(e,ce,"f").innerHTML="<span>".concat(A(i.innerText,!0),"</span>");for(var l=i.parentElement&&i.parentElement.parentElement?i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],f=0,c=l.length;f<c;++f)l[f].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),ge(e,ue,"f").setAttribute("aria-hidden","false")}ge(e,fe,"f").getMedia().level=o,ge(e,fe,"f").getMedia().currentTime=n,a||ge(e,fe,"f").play();var u=M("levelchanged",{detail:{label:i.innerText.trim(),level:o}});ge(e,fe,"f").getElement().dispatchEvent(u),t.preventDefault(),t.stopPropagation()}};var d=(null==u?void 0:u.connection)||(null==u?void 0:u.mozConnection)||(null==u?void 0:u.webkitConnection);ge(this,de,"f").global.connection=function(){var t=ge(e,fe,"f").getMedia().current;if(!re(t)&&!ae(t)){var i=(null==d?void 0:d.effectiveType)||"",n=ge(e,he,"f").map((function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})})),s=n.find((function(e){return e.resolution<360}));"4g"===i?s=n.find((function(e){return e.resolution>=720})):"3g"===i&&(s=n.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(ge(e,fe,"f").pause(),ge(e,fe,"f").getMedia().level=s.id,ge(e,fe,"f").play())}},Object.keys(ge(this,de,"f").media).forEach((function(t){ge(e,fe,"f").getElement().addEventListener(t,ge(e,de,"f").media[t],b)})),document.addEventListener("click",ge(this,de,"f").global.click,b),d&&d.addEventListener("change",ge(this,de,"f").global.connection,b)}},{key:"destroy",value:function(){var e=this,t=ge(this,fe,"f").getOptions().detachMenus,i=(null==u?void 0:u.connection)||(null==u?void 0:u.mozConnection)||(null==u?void 0:u.webkitConnection);Object.keys(ge(this,de,"f").media).forEach((function(t){ge(e,fe,"f").getElement().removeEventListener(t,ge(e,de,"f").media[t])})),document.removeEventListener("click",ge(this,de,"f").global.click),i&&i.removeEventListener("change",ge(this,de,"f").global.connection),t&&(ge(this,ce,"f").removeEventListener("click",ge(this,de,"f").button.click),ge(this,ce,"f").remove(),ge(this,ce,"f").removeEventListener("mouseover",ge(this,de,"f").button.mouseover),ge(this,ue,"f").removeEventListener("mouseover",ge(this,de,"f").button.mouseover),ge(this,ue,"f").removeEventListener("mouseout",ge(this,de,"f").button.mouseout),ge(this,fe,"f").getElement().removeEventListener("controlshidden",ge(this,de,"f").button.mouseout),ge(this,ue,"f").remove())}},{key:"addSettings",value:function(){var e=ge(this,fe,"f").getOptions(),t=e.labels;if(e.detachMenus)return{};var i=this._formatMenuItems();return i.length>2?{className:"op-levels__option",default:ge(this,ve,"f")||"-1",key:"levels",name:null==t?void 0:t.levels,subitems:i}:{}}},{key:"_formatMenuItems",value:function(){for(var e=ge(this,fe,"f").getOptions().labels,t=this._gatherLevels(),i=t.length,n=i?[{key:"-1",label:null==e?void 0:e.auto}]:[],s=function(e){var i=t[e];(n=n.filter((function(e){return e.key!==i.id}))).push({key:i.id,label:i.label})},a=0;a<i;a++)s(a);return n.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt((null==e?void 0:e.label)||"",10)>parseInt((null==t?void 0:t.label)||"",10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){var t=ge(this,fe,"f").getOptions().labels;return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":(null==t?void 0:t.auto)||""}},{key:"_gatherLevels",value:function(){var e=this;return ge(this,he,"f").length||ge(this,fe,"f").getMedia().levels.forEach((function(t){ge(e,he,"f").push(Object.assign(Object.assign({},t),{label:t.label||e._getResolutionsLabel(t.height)}))})),ge(this,he,"f")}},{key:"_buildMenu",value:function(){var e=this;if(ge(this,fe,"f").getOptions().detachMenus){ge(this,ce,"f").classList.add("op-control--no-hover"),ye(this,ue,document.createElement("div"),"f"),ge(this,ue,"f").className="op-settings op-levels__menu",ge(this,ue,"f").setAttribute("aria-hidden","true");var t=this._formatMenuItems(),i='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(ge(e,ve,"f")===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");ge(this,ue,"f").innerHTML=i;var n=document.createElement("div");n.className="op-controls__container op-control__".concat(ge(this,pe,"f")),n.appendChild(ge(this,ce,"f")),n.appendChild(ge(this,ue,"f")),ge(this,fe,"f").getControls().getLayer(ge(this,me,"f")).appendChild(n)}}}]),e}();fe=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,he=new WeakMap,ve=new WeakMap,pe=new WeakMap,me=new WeakMap;var Ee,we,ke,_e,Ae,Le=be,Me=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Te=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ce=function(){function e(t,i,n){s(this,e),Ee.set(this,void 0),we.set(this,void 0),ke.set(this,{controls:{},media:{}}),_e.set(this,void 0),Ae.set(this,void 0),Me(this,Ee,t,"f"),Me(this,_e,i,"f"),Me(this,Ae,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return r(e,[{key:"create",value:function(){var e,t=this,i=Te(this,Ee,"f").getOptions().labels;Me(this,we,document.createElement("button"),"f"),Te(this,we,"f").type="button",Te(this,we,"f").className="op-controls__playpause op-control__".concat(Te(this,_e,"f")),Te(this,we,"f").tabIndex=0,Te(this,we,"f").title=(null==i?void 0:i.play)||"",Te(this,we,"f").setAttribute("aria-controls",Te(this,Ee,"f").id),Te(this,we,"f").setAttribute("aria-pressed","false"),Te(this,we,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""),Te(this,Ee,"f").getControls().getLayer(Te(this,Ae,"f")).appendChild(Te(this,we,"f")),Te(this,ke,"f").button=function(e){Te(t,we,"f").setAttribute("aria-pressed","true");var i=Te(t,Ee,"f").activeElement();i.paused||i.ended?(Te(t,Ee,"f").getAd()&&(Te(t,Ee,"f").getAd().playRequested=!0),i.play(),Te(t,ke,"f").media.play()):(i.pause(),Te(t,ke,"f").media.pause()),e.preventDefault(),e.stopPropagation()};var n=w(Te(this,Ee,"f").getElement());Te(this,ke,"f").media.play=function(){var e;Te(t,Ee,"f").activeElement().ended?(Te(t,Ee,"f").isMedia()?Te(t,we,"f").classList.add("op-controls__playpause--replay"):Te(t,we,"f").classList.add("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.play)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")):(Te(t,we,"f").classList.remove("op-controls__playpause--replay"),Te(t,we,"f").classList.add("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.pause)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""),(null===(e=Te(t,Ee,"f").getOptions())||void 0===e?void 0:e.pauseOthers)&&Object.keys(Yn.instances).forEach((function(e){e!==Te(t,Ee,"f").id&&Yn.instances[e].activeElement().pause()})))},Te(this,ke,"f").media.loadedmetadata=function(){Te(t,we,"f").classList.contains("op-controls__playpause--pause")&&(Te(t,we,"f").classList.remove("op-controls__playpause--replay"),Te(t,we,"f").classList.remove("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.play)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""))},Te(this,ke,"f").media.playing=function(){Te(t,we,"f").classList.contains("op-controls__playpause--pause")||(Te(t,we,"f").classList.remove("op-controls__playpause--replay"),Te(t,we,"f").classList.add("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.pause)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""))},Te(this,ke,"f").media.pause=function(){Te(t,we,"f").classList.remove("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.play)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},Te(this,ke,"f").media.ended=function(){Te(t,Ee,"f").activeElement().ended&&Te(t,Ee,"f").isMedia()||Te(t,Ee,"f").getElement().currentTime>=Te(t,Ee,"f").getElement().duration||Te(t,Ee,"f").getElement().currentTime<=0?(Te(t,we,"f").classList.add("op-controls__playpause--replay"),Te(t,we,"f").classList.remove("op-controls__playpause--pause")):(Te(t,we,"f").classList.remove("op-controls__playpause--replay"),Te(t,we,"f").classList.add("op-controls__playpause--pause")),Te(t,we,"f").title=(null==i?void 0:i.play)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},Te(this,ke,"f").media.adsmediaended=function(){Te(t,we,"f").classList.remove("op-controls__playpause--replay"),Te(t,we,"f").classList.add("op-controls__playpause--pause"),Te(t,we,"f").title=(null==i?void 0:i.pause)||"",Te(t,we,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||"")},Te(this,ke,"f").media.playererror=function(){n&&Te(t,Ee,"f").activeElement().pause()};var s=Te(this,Ee,"f").getElement();Te(this,ke,"f").controls.controlschanged=function(){if(!Te(t,Ee,"f").activeElement().paused){var e=M("playing");s.dispatchEvent(e)}},Object.keys(Te(this,ke,"f").media).forEach((function(e){s.addEventListener(e,Te(t,ke,"f").media[e],b)})),(null===(e=Te(this,Ee,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&s.addEventListener("click",Te(this,ke,"f").button,b),Te(this,Ee,"f").getControls().getContainer().addEventListener("controlschanged",Te(this,ke,"f").controls.controlschanged,b),Te(this,Ee,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,b),Te(this,we,"f").addEventListener("click",Te(this,ke,"f").button,b)}},{key:"destroy",value:function(){var e,t=this;Object.keys(Te(this,ke,"f").media).forEach((function(e){Te(t,Ee,"f").getElement().removeEventListener(e,Te(t,ke,"f").media[e])})),(null===(e=Te(this,Ee,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&Te(this,Ee,"f").getElement().removeEventListener("click",Te(this,ke,"f").button),Te(this,Ee,"f").getControls().getContainer().removeEventListener("controlschanged",Te(this,ke,"f").controls.controlschanged),Te(this,Ee,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Te(this,we,"f").removeEventListener("click",Te(this,ke,"f").button),Te(this,we,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__playpause"))||13!==i&&32!==i||Te(this,ke,"f").button(e)}}]),e}();Ee=new WeakMap,we=new WeakMap,ke=new WeakMap,_e=new WeakMap,Ae=new WeakMap;var Se,Oe,xe,Pe,je,We,Re,Ne,Ie,De,Fe=Ce,Be=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},qe=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},He=function(){function e(t,i,n){s(this,e),Se.set(this,void 0),Oe.set(this,void 0),xe.set(this,void 0),Pe.set(this,void 0),je.set(this,void 0),We.set(this,void 0),Re.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),Ne.set(this,!1),Ie.set(this,void 0),De.set(this,void 0),Be(this,Se,t,"f"),Be(this,Ie,i,"f"),Be(this,De,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return r(e,[{key:"create",value:function(){var e,t=this,i=qe(this,Se,"f").getOptions(),n=i.labels,s=i.progress;Be(this,Oe,document.createElement("div"),"f"),qe(this,Oe,"f").className="op-controls__progress op-control__".concat(qe(this,Ie,"f")),qe(this,Oe,"f").tabIndex=0,qe(this,Oe,"f").setAttribute("aria-label",(null==n?void 0:n.progressSlider)||""),qe(this,Oe,"f").setAttribute("aria-valuemin","0"),Be(this,xe,document.createElement("input"),"f"),qe(this,xe,"f").type="range",qe(this,xe,"f").className="op-controls__progress--seek",qe(this,xe,"f").tabIndex=-1,qe(this,xe,"f").setAttribute("min","0"),qe(this,xe,"f").setAttribute("max","0"),qe(this,xe,"f").setAttribute("step","0.1"),qe(this,xe,"f").value="0",qe(this,xe,"f").setAttribute("aria-label",(null==n?void 0:n.progressRail)||""),qe(this,xe,"f").setAttribute("role","slider"),Be(this,Pe,document.createElement("progress"),"f"),qe(this,Pe,"f").className="op-controls__progress--buffer",qe(this,Pe,"f").setAttribute("max","100"),qe(this,Pe,"f").value=0,Be(this,je,document.createElement("progress"),"f"),qe(this,je,"f").className="op-controls__progress--played",qe(this,je,"f").setAttribute("max","100"),qe(this,je,"f").setAttribute("role","presentation"),qe(this,je,"f").value=0,qe(this,Oe,"f").appendChild(qe(this,xe,"f")),qe(this,Oe,"f").appendChild(qe(this,je,"f")),qe(this,Oe,"f").appendChild(qe(this,Pe,"f")),v||p||(Be(this,We,document.createElement("span"),"f"),qe(this,We,"f").className="op-controls__tooltip",qe(this,We,"f").tabIndex=-1,qe(this,We,"f").innerHTML="00:00",qe(this,Oe,"f").appendChild(qe(this,We,"f")));var a=function(){var e;qe(t,xe,"f").classList.contains("error")&&qe(t,xe,"f").classList.remove("error");var i=qe(t,Se,"f").activeElement();if(i.duration===1/0||qe(t,Se,"f").getElement().getAttribute("op-live__enabled")||qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled"))qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")?(qe(t,xe,"f").setAttribute("max","1"),qe(t,xe,"f").value="1",qe(t,xe,"f").style.backgroundSize="100% 100%",qe(t,je,"f").value=1,qe(t,Oe,"f").setAttribute("aria-valuemax","1"),qe(t,Oe,"f").setAttribute("aria-hidden","false")):(null===(e=qe(t,Se,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||qe(t,Oe,"f").setAttribute("aria-hidden","true");else{qe(t,xe,"f").setAttribute("max","".concat(i.duration));var n=qe(t,Se,"f").isMedia()?i.currentTime:i.duration-i.currentTime;qe(t,xe,"f").value=n.toString(),qe(t,Oe,"f").setAttribute("aria-valuemax",i.duration.toString())}},r=0,o=(null===(e=qe(this,Se,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0,l=w(qe(this,Se,"f").getElement());qe(this,Re,"f").media.loadedmetadata=a.bind(this),qe(this,Re,"f").controls.controlschanged=a.bind(this),qe(this,Re,"f").media.progress=function(e){var i,n=e.target;if(n.duration===1/0||qe(t,Se,"f").getElement().getAttribute("op-live__enabled"))qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==qe(t,Oe,"f").getAttribute("aria-hidden")||(null===(i=qe(t,Se,"f").getOptions().live)||void 0===i?void 0:i.showProgress)||qe(t,Oe,"f").setAttribute("aria-hidden","true");else if(n.duration>0)for(var s=0,a=n.buffered.length;s<a;s++)if(n.buffered.start(n.buffered.length-1-s)<n.currentTime){qe(t,Pe,"f").value=n.buffered.end(n.buffered.length-1-s)/n.duration*100;break}},qe(this,Re,"f").media.waiting=function(){l&&!qe(t,xe,"f").classList.contains("loading")&&qe(t,xe,"f").classList.add("loading"),l&&qe(t,xe,"f").classList.contains("error")&&qe(t,xe,"f").classList.remove("error")},qe(this,Re,"f").media.playererror=function(){l&&!qe(t,xe,"f").classList.contains("error")&&qe(t,xe,"f").classList.add("error"),l&&qe(t,xe,"f").classList.contains("loading")&&qe(t,xe,"f").classList.remove("loading")},qe(this,Re,"f").media.pause=function(){var e=qe(t,Se,"f").activeElement();if(e.duration!==1/0&&!qe(t,Se,"f").getElement().getAttribute("op-live__enabled")){var i=e.currentTime;qe(t,Oe,"f").setAttribute("aria-valuenow",i.toString()),qe(t,Oe,"f").setAttribute("aria-valuetext",T(i))}},qe(this,Re,"f").media.play=function(){l&&qe(t,xe,"f").classList.contains("loading")&&qe(t,xe,"f").classList.remove("loading"),l&&qe(t,xe,"f").classList.contains("error")&&qe(t,xe,"f").classList.remove("error"),qe(t,Se,"f").activeElement().duration===1/0||qe(t,Se,"f").getElement().getAttribute("op-live__enabled")||(qe(t,Oe,"f").removeAttribute("aria-valuenow"),qe(t,Oe,"f").removeAttribute("aria-valuetext"))},qe(this,Re,"f").media.playing=function(){l&&qe(t,xe,"f").classList.contains("loading")&&qe(t,xe,"f").classList.remove("loading"),l&&qe(t,xe,"f").classList.contains("error")&&qe(t,xe,"f").classList.remove("error")},qe(this,Re,"f").media.timeupdate=function(){var e,i=qe(t,Se,"f").activeElement();if(i.duration===1/0||qe(t,Se,"f").getElement().getAttribute("op-live__enabled")&&!qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled"))qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==qe(t,Oe,"f").getAttribute("aria-hidden")||(null===(e=qe(t,Se,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||qe(t,Oe,"f").setAttribute("aria-hidden","true");else{qe(t,xe,"f").getAttribute("max")&&"0"!==qe(t,xe,"f").getAttribute("max")&&parseFloat(qe(t,xe,"f").getAttribute("max")||"-1")===i.duration||(qe(t,xe,"f").setAttribute("max","".concat(i.duration)),qe(t,Oe,"f").setAttribute("aria-hidden","false"));var n=i.duration-i.currentTime+1>=100?100:i.duration-i.currentTime+1,s=qe(t,Se,"f").isMedia()?i.currentTime:n,a=parseFloat(qe(t,xe,"f").min),l=parseFloat(qe(t,xe,"f").max);qe(t,xe,"f").value=s.toString(),qe(t,xe,"f").style.backgroundSize="".concat(100*(s-a)/(l-a),"% 100%"),qe(t,je,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:s/i.duration*100,qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")&&Math.floor(qe(t,je,"f").value)>=99&&(r=i.currentTime,qe(t,Oe,"f").setAttribute("aria-hidden","false"))}},qe(this,Re,"f").media.durationchange=function(){var e=qe(t,Se,"f").activeElement(),i=qe(t,Se,"f").isMedia()?e.currentTime:e.duration-e.currentTime;qe(t,xe,"f").setAttribute("max","".concat(e.duration)),qe(t,Oe,"f").setAttribute("aria-valuemax",e.duration.toString()),qe(t,je,"f").value=e.duration<=0||Number.isNaN(e.duration)||!Number.isFinite(e.duration)?o:i/e.duration*100},qe(this,Re,"f").media.ended=function(){qe(t,xe,"f").style.backgroundSize="0% 100%",qe(t,xe,"f").setAttribute("max","0"),qe(t,Pe,"f").value=0,qe(t,je,"f").value=0};var f=function(e){var i=qe(t,Se,"f").activeElement(),n=e.target,a=parseFloat(n.value);if(qe(t,xe,"f").classList.contains("op-progress--pressed")||a<i.currentTime&&!(null==s?void 0:s.allowRewind)||a>i.currentTime&&!(null==s?void 0:s.allowSkip))qe(t,xe,"f").value=i.currentTime.toString();else{qe(t,xe,"f").classList.add(".op-progress--pressed");var l=parseFloat(n.min),f=parseFloat(n.max),c=parseFloat(n.value);qe(t,xe,"f").style.backgroundSize="".concat(100*(c-l)/(f-l),"% 100%"),qe(t,je,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:c/i.duration*100,qe(t,Se,"f").getElement().getAttribute("op-dvr__enabled")?i.currentTime=Math.round(qe(t,je,"f").value)>=99?r:c:i.currentTime=c,qe(t,xe,"f").classList.remove(".op-progress--pressed")}},c=function(){var e=qe(t,Se,"f").activeElement();!0===qe(t,Ne,"f")&&qe(t,Se,"f").isMedia()&&e.paused&&(e.play(),Be(t,Ne,!1,"f"))};qe(this,Re,"f").slider.input=f.bind(this),qe(this,Re,"f").slider.change=f.bind(this),qe(this,Re,"f").slider.mousedown=function(e){var i=qe(t,Se,"f").activeElement(),n=e.which||e.keyCode||0,a=qe(t,xe,"f"),r=Math.round(Number(a.value)),o=Math.round(i.currentTime);!(r<o&&(null==s?void 0:s.allowRewind)||r>=o&&(null==s?void 0:s.allowSkip))||1!==n&&0!==n||!qe(t,Se,"f").isMedia()||i.paused||(i.pause(),Be(t,Ne,!0,"f"))}.bind(this),qe(this,Re,"f").slider.mouseup=c.bind(this),qe(this,Re,"f").slider.touchstart=function(e){var i,n=qe(t,Se,"f").activeElement();if(n.duration!==1/0){var a=(((null===(i=e.changedTouches[0])||void 0===i?void 0:i.pageX)||0)-_(qe(t,Oe,"f")).left)/qe(t,Oe,"f").offsetWidth*n.duration;(a<n.currentTime&&(null==s?void 0:s.allowRewind)||a>n.currentTime&&(null==s?void 0:s.allowSkip))&&(qe(t,xe,"f").value=a.toString(),f(e),n.paused||(n.pause(),Be(t,Ne,!0,"f")))}}.bind(this),qe(this,Re,"f").slider.touchend=c.bind(this),v||p||(qe(this,Re,"f").container.mousemove=function(e){var i=qe(t,Se,"f").activeElement();if(i.duration!==1/0&&!qe(t,Se,"f").isAd()){var n=e.pageX,s=n-_(qe(t,Oe,"f")).left,a=qe(t,We,"f").offsetWidth/2,r=s/qe(t,Oe,"f").offsetWidth,o=r*i.duration,l=qe(t,Se,"f").getContainer(),f=l.offsetWidth-qe(t,We,"f").offsetWidth;s<=0||n-_(l).left<=a?s=0:n-_(l).left>=f?s=f-_(qe(t,xe,"f")).left-10:s-=a,r>=0&&r<=1?qe(t,We,"f").classList.add("op-controls__tooltip--visible"):qe(t,We,"f").classList.remove("op-controls__tooltip--visible"),qe(t,We,"f").style.left="".concat(s,"px"),qe(t,We,"f").innerHTML=Number.isNaN(o)?"00:00":T(o)}},qe(this,Re,"f").global.mousemove=function(e){e.target.closest(".op-controls__progress")&&!qe(t,Se,"f").isAd()||qe(t,We,"f").classList.remove("op-controls__tooltip--visible")}),Object.keys(qe(this,Re,"f").media).forEach((function(e){qe(t,Se,"f").getElement().addEventListener(e,qe(t,Re,"f").media[e],b)})),Object.keys(qe(this,Re,"f").slider).forEach((function(e){qe(t,xe,"f").addEventListener(e,qe(t,Re,"f").slider[e],b)})),qe(this,Oe,"f").addEventListener("keydown",qe(this,Se,"f").getEvents().keydown,b),qe(this,Oe,"f").addEventListener("mousemove",qe(this,Re,"f").container.mousemove,b),document.addEventListener("mousemove",qe(this,Re,"f").global.mousemove,b),qe(this,Se,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,b),qe(this,Se,"f").getControls().getContainer().addEventListener("controlschanged",qe(this,Re,"f").controls.controlschanged,b),qe(this,Se,"f").getControls().getLayer(qe(this,De,"f")).appendChild(qe(this,Oe,"f"))}},{key:"destroy",value:function(){var e=this;Object.keys(qe(this,Re,"f")).forEach((function(t){qe(e,Se,"f").getElement().removeEventListener(t,qe(e,Re,"f")[t])})),Object.keys(qe(this,Re,"f").slider).forEach((function(t){qe(e,xe,"f").removeEventListener(t,qe(e,Re,"f").slider[t])})),qe(this,Oe,"f").removeEventListener("keydown",qe(this,Se,"f").getEvents().keydown),qe(this,Oe,"f").removeEventListener("mousemove",qe(this,Re,"f").container.mousemove),document.removeEventListener("mousemove",qe(this,Re,"f").global.mousemove),qe(this,Se,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),qe(this,Se,"f").getControls().getContainer().removeEventListener("controlschanged",qe(this,Re,"f").controls.controlschanged),qe(this,Pe,"f").remove(),qe(this,je,"f").remove(),qe(this,xe,"f").remove(),v||p||qe(this,We,"f").remove(),qe(this,Oe,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t=qe(this,Se,"f").activeElement(),i=qe(this,Se,"f").isAd(),n=e.which||e.keyCode||0;if(!i&&n>=48&&n<=57&&t.duration!==1/0){for(var s=0,a=48;a<=57;a++)a<n&&s++;t.currentTime=t.duration*(.1*s),e.preventDefault(),e.stopPropagation()}}}]),e}();Se=new WeakMap,Oe=new WeakMap,xe=new WeakMap,Pe=new WeakMap,je=new WeakMap,We=new WeakMap,Re=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,De=new WeakMap;var Ke,Ve,ze,Ue,Ge,Qe,$e,Je,Ye=He,Xe=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ze=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},et=function(){function e(t,i,n){s(this,e),Ke.set(this,void 0),Ve.set(this,{}),ze.set(this,void 0),Ue.set(this,void 0),Ge.set(this,{global:{},media:{}}),Qe.set(this,""),$e.set(this,void 0),Je.set(this,void 0),Xe(this,Ke,t,"f"),Xe(this,$e,i,"f"),Xe(this,Je,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return r(e,[{key:"create",value:function(){var e=this,t=Ze(this,Ke,"f").getOptions().labels;Xe(this,ze,document.createElement("button"),"f"),Ze(this,ze,"f").className="op-controls__settings op-control__".concat(Ze(this,$e,"f")),Ze(this,ze,"f").tabIndex=0,Ze(this,ze,"f").title=(null==t?void 0:t.settings)||"",Ze(this,ze,"f").setAttribute("aria-controls",Ze(this,Ke,"f").id),Ze(this,ze,"f").setAttribute("aria-pressed","false"),Ze(this,ze,"f").setAttribute("aria-label",(null==t?void 0:t.settings)||""),Xe(this,Ue,document.createElement("div"),"f"),Ze(this,Ue,"f").className="op-settings",Ze(this,Ue,"f").setAttribute("aria-hidden","true"),Ze(this,Ue,"f").innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){Ze(e,ze,"f").setAttribute("aria-pressed","true");for(var t=Ze(e,Ke,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Ze(e,Ue,"f")&&t[i].setAttribute("aria-hidden","true");Ze(e,Ue,"f").setAttribute("aria-hidden","false"===Ze(e,Ue,"f").getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){Ze(e,Ue,"f").innerHTML=Ze(e,Qe,"f"),Ze(e,Ue,"f").setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var i=t.detail,n=i.id,s=i.type;e.removeItem(n,s)},this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),this.removeEvent=this.removeEvent.bind(this),Ze(this,Ge,"f").media.controlshidden=this.hideEvent.bind(this),Ze(this,Ge,"f").media.settingremoved=this.removeEvent.bind(this),Ze(this,Ge,"f").media.play=this.hideEvent.bind(this),Ze(this,Ge,"f").media.pause=this.hideEvent.bind(this),Ze(this,Ke,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,b),Ze(this,Ge,"f").global.click=function(t){var i=t.target;if((null==i?void 0:i.closest("#".concat(Ze(e,Ke,"f").id)))&&(null==i?void 0:i.classList.contains("op-speed__option"))){var n=(null==i?void 0:i.getAttribute("data-value"))||"";Ze(e,Ke,"f").getMedia().playbackRate=parseFloat(n.replace("speed-",""))}},Ze(this,Ge,"f").global.resize=this.hideEvent.bind(this),Ze(this,ze,"f").addEventListener("click",this.clickEvent,b),Object.keys(Ze(this,Ge,"f")).forEach((function(t){Ze(e,Ke,"f").getElement().addEventListener(t,Ze(e,Ge,"f").media[t],b)})),document.addEventListener("click",Ze(this,Ge,"f").global.click,b),document.addEventListener("keydown",Ze(this,Ge,"f").global.click,b),"undefined"!=typeof window&&window.addEventListener("resize",Ze(this,Ge,"f").global.resize,b),Ze(this,Ke,"f").getControls().getLayer(Ze(this,Je,"f")).appendChild(Ze(this,ze,"f")),Ze(this,Ke,"f").getContainer().appendChild(Ze(this,Ue,"f"))}},{key:"destroy",value:function(){var e=this;Ze(this,ze,"f").removeEventListener("click",this.clickEvent),Object.keys(Ze(this,Ge,"f")).forEach((function(t){Ze(e,Ke,"f").getElement().removeEventListener(t,Ze(e,Ge,"f").media[t])})),document.removeEventListener("click",Ze(this,Ge,"f").global.click),document.removeEventListener("keydown",Ze(this,Ge,"f").global.click),"undefined"!=typeof window&&window.removeEventListener("resize",Ze(this,Ge,"f").global.resize),void 0!==Ze(this,Ge,"f").global["settings.submenu"]&&(document.removeEventListener("click",Ze(this,Ge,"f").global["settings.submenu"]),Ze(this,Ke,"f").getElement().removeEventListener("controlshidden",this.hideEvent)),Ze(this,Ke,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Ze(this,Ue,"f").remove(),Ze(this,ze,"f").remove()}},{key:"addSettings",value:function(){var e=Ze(this,Ke,"f").getMedia(),t=Ze(this,Ke,"f").getOptions().labels,i=1;return Ze(this,Ke,"f")&&e&&(i=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:i.toString(),key:"speed",name:(null==t?void 0:t.speed)||"",subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:(null==t?void 0:t.speedNormal)||""},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,t,i,n,s){var a=this,r="".concat(t,"-").concat(A(i,!0)),o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(r,'">').concat(e,"</div>");var l=n?n.find((function(e){return e.key===i})):null;l&&(o.innerHTML+='<div class="op-settings__menu-content" tabindex="0">'.concat(l.label,"</div>"));var f=Ze(this,Ue,"f").querySelector(".op-settings__menu");if(f&&f.appendChild(o),Xe(this,Qe,Ze(this,Ue,"f").innerHTML,"f"),n){var c='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(t,'">\n                    ').concat(n.map((function(e){return'\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="'.concat(i===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(s||"",'" tabindex="0" data-value="').concat(t,"-").concat(e.key,'">\n                            ').concat(e.label,"\n                        </div>\n                    </div>")})).join(""),"\n                </div>");Ze(this,Ve,"f")[t]=c}Ze(this,Ge,"f").global["settings.submenu"]=function(e){var n=e.target;if(n.closest("#".concat(Ze(a,Ke,"f").id))){if(n.classList.contains("op-settings__back"))Ze(a,Ue,"f").classList.add("op-settings--sliding"),setTimeout((function(){Ze(a,Ue,"f").innerHTML=Ze(a,Qe,"f"),Ze(a,Ue,"f").classList.remove("op-settings--sliding")}),100);else if(n.classList.contains("op-settings__menu-content")){var s=n.parentElement?n.parentElement.querySelector(".op-settings__menu-label"):null,r=s?s.getAttribute("data-value"):null,o=r?r.split("-"):[];if(o.length>0){o.pop();var l=o.join("-").replace(/^\-|\-$/,"");void 0!==Ze(a,Ve,"f")[l]&&(Ze(a,Ue,"f").classList.add("op-settings--sliding"),setTimeout((function(){Ze(a,Ue,"f").innerHTML=Ze(a,Ve,"f")[l],Ze(a,Ue,"f").classList.remove("op-settings--sliding")}),100))}}else if(n.classList.contains("op-settings__submenu-label")){var f=n.getAttribute("data-value"),c=f?f.replace("".concat(t,"-"),""):"",u=n.innerText,d=Ze(a,Ue,"f").querySelector("#menu-item-".concat(t," .op-settings__submenu-item[aria-checked=true]"));d&&(d.setAttribute("aria-checked","false"),n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),Ze(a,Ve,"f")[t]=Ze(a,Ue,"f").innerHTML,Ze(a,Ue,"f").classList.add("op-settings--sliding"),setTimeout((function(){Ze(a,Ue,"f").innerHTML=Ze(a,Qe,"f");var e=Ze(a,Ue,"f").querySelector('.op-settings__menu-label[data-value="'.concat(t,"-").concat(i,'"]'));e&&(e.setAttribute("data-value","".concat(f)),e.nextElementSibling&&(e.nextElementSibling.textContent=u)),i=c,Xe(a,Qe,Ze(a,Ue,"f").innerHTML,"f"),Ze(a,Ue,"f").classList.remove("op-settings--sliding")}),100))}}else a.hideEvent()},document.addEventListener("click",Ze(this,Ge,"f").global["settings.submenu"],b),Ze(this,Ke,"f").getElement().addEventListener("controlshidden",this.hideEvent,b)}},{key:"removeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=Ze(this,Ke,"f").getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(n&&n.remove(),Ze(this,Ke,"f").getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<i){delete Ze(this,Ve,"f")[t];var s=Ze(this,Ke,"f").getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),a=s?s.closest(".op-settings__menu-item"):null;a&&a.remove()}}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n,s,a=e.which||e.keyCode||0,r=Ze(this,Ke,"f").isAd(),o=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__settings"),l=(null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.classList.contains("op-settings__menu-content"))||(null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.classList.contains("op-settings__back"))||(null===(s=null===document||void 0===document?void 0:document.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__submenu-label"));r||(!o||13!==a&&32!==a?!l||13!==a&&32!==a||(Ze(this,Ge,"f").global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}]),e}();Ke=new WeakMap,Ve=new WeakMap,ze=new WeakMap,Ue=new WeakMap,Ge=new WeakMap,Qe=new WeakMap,$e=new WeakMap,Je=new WeakMap;var tt,it,nt,st,at,rt,ot,lt,ft=et,ct=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ut=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},dt=function(){function e(t,i,n){s(this,e),tt.set(this,void 0),it.set(this,void 0),nt.set(this,void 0),st.set(this,void 0),at.set(this,void 0),rt.set(this,{controls:{},media:{}}),ot.set(this,void 0),lt.set(this,void 0),ct(this,tt,t,"f"),ct(this,ot,i,"f"),ct(this,lt,n,"f")}return r(e,[{key:"create",value:function(){var e=this,t=ut(this,tt,"f").getOptions(),i=t.labels,n=t.progress;ct(this,it,document.createElement("time"),"f"),ut(this,it,"f").className="op-controls__current",ut(this,it,"f").setAttribute("role","timer"),ut(this,it,"f").setAttribute("aria-live","off"),ut(this,it,"f").setAttribute("aria-hidden","false"),ut(this,it,"f").innerText="0:00";var s=(null==n?void 0:n.showCurrentTimeOnly)||!1;s||(ct(this,nt,document.createElement("span"),"f"),ut(this,nt,"f").className="op-controls__time-delimiter",ut(this,nt,"f").setAttribute("aria-hidden","false"),ut(this,nt,"f").innerText="/",ct(this,st,document.createElement("time"),"f"),ut(this,st,"f").className="op-controls__duration",ut(this,st,"f").setAttribute("aria-hidden","false"),ut(this,st,"f").innerText=T((null==n?void 0:n.duration)||0));var a=ut(this,tt,"f").getControls().getLayer(ut(this,lt,"f"));ct(this,at,document.createElement("span"),"f"),ut(this,at,"f").className="op-controls-time op-control__".concat(ut(this,ot,"f")),ut(this,at,"f").appendChild(ut(this,it,"f")),s||(ut(this,at,"f").appendChild(ut(this,nt,"f")),ut(this,at,"f").appendChild(ut(this,st,"f"))),a.appendChild(ut(this,at,"f"));var r=function(){var t,i=ut(e,tt,"f").activeElement();if(i.duration===1/0||ut(e,tt,"f").getElement().getAttribute("op-live__enabled"))s||(ut(e,st,"f").setAttribute("aria-hidden","true"),ut(e,nt,"f").setAttribute("aria-hidden","true"));else{if(!s){var n=Number.isNaN(i.duration)?(null===(t=ut(e,tt,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;ut(e,st,"f").innerText=T(n)}ut(e,it,"f").innerText=T(i.currentTime)}};ut(this,rt,"f").media.loadedmetadata=r.bind(this),ut(this,rt,"f").controls.controlschanged=r.bind(this);var o=(ut(this,tt,"f").getOptions().live||{}).showLabel;ut(this,rt,"f").media.timeupdate=function(){var t=ut(e,tt,"f").activeElement();if(t.duration===1/0||ut(e,tt,"f").getElement().getAttribute("op-live__enabled")||ut(e,tt,"f").getElement().getAttribute("op-dvr__enabled"))ut(e,tt,"f").getElement().getAttribute("op-dvr__enabled")?(s||(ut(e,st,"f").setAttribute("aria-hidden","true"),ut(e,nt,"f").setAttribute("aria-hidden","true")),ut(e,it,"f").innerText=T(t.currentTime)):s||!ut(e,tt,"f").getElement().getAttribute("op-dvr__enabled")&&"false"===ut(e,st,"f").getAttribute("aria-hidden")?(s||(ut(e,st,"f").setAttribute("aria-hidden","true"),ut(e,nt,"f").setAttribute("aria-hidden","true")),ut(e,it,"f").innerText=o?(null==i?void 0:i.live)||"":T(t.currentTime)):ut(e,it,"f").innerText=o?(null==i?void 0:i.live)||"":T(t.currentTime);else{var n=T(t.duration);s||Number.isNaN(t.duration)||n===ut(e,st,"f").innerText?(s||n!==ut(e,st,"f").innerText)&&(ut(e,it,"f").innerText=o?(null==i?void 0:i.live)||"":T(t.currentTime)):(ut(e,st,"f").innerText=n,ut(e,st,"f").setAttribute("aria-hidden","false"),ut(e,nt,"f").setAttribute("aria-hidden","false")),ut(e,it,"f").innerText=T(t.currentTime)}},ut(this,rt,"f").media.ended=function(){var t,i=ut(e,tt,"f").activeElement(),n=Number.isNaN(i.duration)?(null===(t=ut(e,tt,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;!s&&ut(e,tt,"f").isMedia()&&(ut(e,st,"f").innerText=T(n))},Object.keys(ut(this,rt,"f").media).forEach((function(t){ut(e,tt,"f").getElement().addEventListener(t,ut(e,rt,"f").media[t],b)})),ut(this,tt,"f").getControls().getContainer().addEventListener("controlschanged",ut(this,rt,"f").controls.controlschanged,b)}},{key:"destroy",value:function(){var e=this;Object.keys(ut(this,rt,"f").media).forEach((function(t){ut(e,tt,"f").getElement().removeEventListener(t,ut(e,rt,"f").media[t])})),ut(this,tt,"f").getControls().getContainer().removeEventListener("controlschanged",ut(this,rt,"f").controls.controlschanged),ut(this,it,"f").remove(),(ut(this,tt,"f").getOptions().progress||{}).showCurrentTimeOnly||(ut(this,nt,"f").remove(),ut(this,st,"f").remove()),ut(this,at,"f").remove()}}]),e}();tt=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,at=new WeakMap,rt=new WeakMap,ot=new WeakMap,lt=new WeakMap;var ht,vt,pt,mt,yt,gt,bt,Et,wt,kt=dt,_t=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},At=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Lt=function(){function e(t,i,n){s(this,e),ht.set(this,void 0),vt.set(this,void 0),pt.set(this,void 0),mt.set(this,void 0),yt.set(this,void 0),gt.set(this,{button:{},media:{},slider:{}}),bt.set(this,void 0),Et.set(this,void 0),wt.set(this,void 0),_t(this,ht,t,"f"),_t(this,bt,At(this,ht,"f").getMedia().volume,"f"),_t(this,Et,i,"f"),_t(this,wt,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return r(e,[{key:"create",value:function(){var e=this,t=At(this,ht,"f").getOptions().labels;_t(this,pt,document.createElement("div"),"f"),At(this,pt,"f").className="op-controls__volume op-control__".concat(At(this,Et,"f")),At(this,pt,"f").tabIndex=0,At(this,pt,"f").setAttribute("aria-valuemin","0"),At(this,pt,"f").setAttribute("aria-valuemax","100"),At(this,pt,"f").setAttribute("aria-valuenow","".concat(At(this,bt,"f"))),At(this,pt,"f").setAttribute("aria-valuetext","".concat((null==t?void 0:t.volume)||"",": ").concat(At(this,bt,"f"))),At(this,pt,"f").setAttribute("aria-orientation","vertical"),At(this,pt,"f").setAttribute("aria-label",(null==t?void 0:t.volumeSlider)||""),_t(this,yt,document.createElement("input"),"f"),At(this,yt,"f").type="range",At(this,yt,"f").className="op-controls__volume--input",At(this,yt,"f").tabIndex=-1,At(this,yt,"f").value=At(this,ht,"f").getMedia().volume.toString(),At(this,yt,"f").setAttribute("min","0"),At(this,yt,"f").setAttribute("max","1"),At(this,yt,"f").setAttribute("step","0.1"),At(this,yt,"f").setAttribute("aria-label",(null==t?void 0:t.volumeControl)||""),_t(this,mt,document.createElement("progress"),"f"),At(this,mt,"f").className="op-controls__volume--display",At(this,mt,"f").setAttribute("max","10"),At(this,mt,"f").setAttribute("role","presentation"),At(this,mt,"f").value=10*At(this,ht,"f").getMedia().volume,At(this,pt,"f").appendChild(At(this,yt,"f")),At(this,pt,"f").appendChild(At(this,mt,"f")),_t(this,vt,document.createElement("button"),"f"),At(this,vt,"f").type="button",At(this,vt,"f").className="op-controls__mute op-control__".concat(At(this,Et,"f")),At(this,vt,"f").tabIndex=0,At(this,vt,"f").title=(null==t?void 0:t.mute)||"",At(this,vt,"f").setAttribute("aria-controls",At(this,ht,"f").id),At(this,vt,"f").setAttribute("aria-pressed","false"),At(this,vt,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||"");var i=function(t){var i=At(e,ht,"f").activeElement(),n=parseFloat(t.target.value);i.volume=n,i.muted=0===i.volume,_t(e,bt,n,"f");var s=At(e,ht,"f").getContainer().querySelector(".op-player__unmute");!i.muted&&s&&s.remove();var a=M("volumechange");At(e,ht,"f").getElement().dispatchEvent(a)};if(At(this,gt,"f").media.volumechange=function(){var i,n,s,a=At(e,ht,"f").activeElement();n=1*(i=a).volume,s=Math.floor(100*n),At(e,yt,"f").value="".concat(i.volume),At(e,mt,"f").value=10*n,At(e,pt,"f").setAttribute("aria-valuenow","".concat(s)),At(e,pt,"f").setAttribute("aria-valuetext","".concat(null==t?void 0:t.volume,": ").concat(s)),function(t){var i=t.volume;i<=.5&&i>0?(At(e,vt,"f").classList.remove("op-controls__mute--muted"),At(e,vt,"f").classList.add("op-controls__mute--half")):0===i?(At(e,vt,"f").classList.add("op-controls__mute--muted"),At(e,vt,"f").classList.remove("op-controls__mute--half")):(At(e,vt,"f").classList.remove("op-controls__mute--muted"),At(e,vt,"f").classList.remove("op-controls__mute--half"))}(a)},At(this,gt,"f").media.loadedmetadata=function(){var t=At(e,ht,"f").activeElement();t.muted&&(t.volume=0);var i=M("volumechange");At(e,ht,"f").getElement().dispatchEvent(i)},At(this,gt,"f").slider.input=i.bind(this),At(this,gt,"f").slider.change=i.bind(this),At(this,gt,"f").button.click=function(){At(e,vt,"f").setAttribute("aria-pressed","true");var i=At(e,ht,"f").activeElement();i.muted=!i.muted,i.muted?(i.volume=0,At(e,vt,"f").title=(null==t?void 0:t.unmute)||"",At(e,vt,"f").setAttribute("aria-label",(null==t?void 0:t.unmute)||"")):(i.volume=At(e,bt,"f"),At(e,vt,"f").title=(null==t?void 0:t.mute)||"",At(e,vt,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||""));var n=M("volumechange");At(e,ht,"f").getElement().dispatchEvent(n)},At(this,vt,"f").addEventListener("click",At(this,gt,"f").button.click,b),Object.keys(At(this,gt,"f").media).forEach((function(t){At(e,ht,"f").getElement().addEventListener(t,At(e,gt,"f").media[t],b)})),Object.keys(At(this,gt,"f").slider).forEach((function(t){At(e,yt,"f").addEventListener(t,At(e,gt,"f").slider[t],b)})),At(this,ht,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,b),p||!p){var n=At(this,ht,"f").getControls().getLayer(At(this,wt,"f"));n.appendChild(At(this,vt,"f")),n.appendChild(At(this,pt,"f"))}}},{key:"destroy",value:function(){var e=this;At(this,vt,"f").removeEventListener("click",At(this,gt,"f").button.click),Object.keys(At(this,gt,"f").media).forEach((function(t){At(e,ht,"f").getElement().removeEventListener(t,At(e,gt,"f").media[t])})),Object.keys(At(this,gt,"f").slider).forEach((function(t){At(e,yt,"f").removeEventListener(t,At(e,gt,"f").slider[t])})),At(this,ht,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),At(this,yt,"f").remove(),At(this,mt,"f").remove(),At(this,pt,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0,n=At(this,ht,"f").activeElement();!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__mute"))||13!==i&&32!==i||(n.muted=!n.muted,n.volume=n.muted?0:At(this,bt,"f"),At(this,gt,"f").button.click(),e.preventDefault(),e.stopPropagation())}}]),e}();ht=new WeakMap,vt=new WeakMap,pt=new WeakMap,mt=new WeakMap,yt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Et=new WeakMap,wt=new WeakMap;var Mt,Tt,Ct,St,Ot,xt,Pt=Lt,jt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Wt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Rt=function(){function e(t){s(this,e),this.events={media:{},mouse:{}},Mt.set(this,void 0),Tt.set(this,0),Ct.set(this,void 0),St.set(this,void 0),Ot.set(this,void 0),xt.set(this,{Captions:ee,Fullscreen:se,Levels:Le,Play:Fe,Progress:Ye,Settings:ft,Time:kt,Volume:Pt}),jt(this,St,t,"f"),this._setElements()}return r(e,[{key:"create",value:function(){var e=this;Wt(this,St,"f").getElement().controls=!1;var t=E(Wt(this,St,"f").getElement());if(this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){Wt(e,St,"f").getContainer().classList.remove("op-controls--hidden")},Wt(this,St,"f").getElement().addEventListener("controlschanged",this.events.controlschanged,b),Wt(this,St,"f").getElement().addEventListener("ended",this.events.ended,b),!(Wt(this,St,"f").getOptions().controls||{}).alwaysVisible){var i=function(){t&&(Wt(e,St,"f").getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer())};this.events.mouse.mouseenter=function(){t&&!Wt(e,St,"f").activeElement().paused&&(e._stopControlTimer(),Wt(e,St,"f").activeElement().currentTime?(Wt(e,St,"f").playBtn.setAttribute("aria-hidden",Wt(e,St,"f").isMedia()?"false":"true"),Wt(e,St,"f").loader.setAttribute("aria-hidden","true")):Wt(e,St,"f").getOptions().showLoaderOnInit&&(Wt(e,St,"f").playBtn.setAttribute("aria-hidden","true"),Wt(e,St,"f").loader.setAttribute("aria-hidden","false")),Wt(e,St,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&!Wt(e,St,"f").activeElement().paused&&(Wt(e,St,"f").activeElement().currentTime?(Wt(e,St,"f").loader.setAttribute("aria-hidden","true"),Wt(e,St,"f").playBtn.setAttribute("aria-hidden",Wt(e,St,"f").isMedia()?"false":"true")):(Wt(e,St,"f").playBtn.setAttribute("aria-hidden",Wt(e,St,"f").getOptions().showLoaderOnInit?"true":"false"),Wt(e,St,"f").loader.setAttribute("aria-hidden",Wt(e,St,"f").getOptions().showLoaderOnInit?"false":"true")),Wt(e,St,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!Wt(e,St,"f").activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(Wt(e,St,"f").getOptions().hidePlayBtnTimer||350)},this.events.media.loadedmetadata=i.bind(this),this.events.media.pause=i.bind(this),this.events.media.waiting=i.bind(this),this.events.media.stalled=i.bind(this),this.events.media.playererror=i.bind(this),Object.keys(this.events.media).forEach((function(t){Wt(e,St,"f").getElement().addEventListener(t,e.events.media[t],b)})),p||v?Wt(this,St,"f").getContainer().addEventListener("click",this.events.mouse.mouseenter,b):Object.keys(this.events.mouse).forEach((function(t){Wt(e,St,"f").getContainer().addEventListener(t,e.events.mouse[t],b)})),t&&!Wt(this,St,"f").activeElement().paused&&this._startControlTimer(3e3)}}},{key:"destroy",value:function(){var e=this;p||v||(Object.keys(this.events.mouse).forEach((function(t){Wt(e,St,"f").getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){Wt(e,St,"f").getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),Wt(this,St,"f").getElement().removeEventListener("controlschanged",this.events.controlschanged),Wt(this,St,"f").getElement().removeEventListener("ended",this.events.ended),Object.keys(Wt(this,Ot,"f")).forEach((function(t){Wt(e,Ot,"f")[t].forEach((function(t){t.custom?e._destroyCustomElement(t):"function"==typeof t.destroy&&t.destroy()}))})),Wt(this,Ct,"f").remove()}},{key:"getContainer",value:function(){return Wt(this,Ct,"f")}},{key:"getLayer",value:function(e){return Wt(this,Ct,"f").querySelector(".op-controls-layer__".concat(e))||Wt(this,Ct,"f")}},{key:"_createControlsLayer",value:function(){if(!Wt(this,Ct,"f")||!Wt(this,St,"f").getContainer().querySelector(".op-controls")){jt(this,Ct,document.createElement("div"),"f"),Wt(this,Ct,"f").className="op-controls",Wt(this,St,"f").getContainer().appendChild(Wt(this,Ct,"f"));var e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),w(Wt(this,St,"f").getElement())&&Wt(this,Ct,"f").appendChild(e)}}},{key:"_startControlTimer",value:function(e){var t=this,i=Wt(this,St,"f").activeElement();this._stopControlTimer(),"undefined"!=typeof window&&jt(this,Tt,window.setTimeout((function(){if((!i.paused||!i.ended)&&E(Wt(t,St,"f").getElement())){Wt(t,St,"f").getContainer().classList.add("op-controls--hidden"),Wt(t,St,"f").playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=M("controlshidden");Wt(t,St,"f").getElement().dispatchEvent(e)}}),e),"f")}},{key:"_stopControlTimer",value:function(){0!==Wt(this,Tt,"f")&&(clearTimeout(Wt(this,Tt,"f")),jt(this,Tt,0,"f"))}},{key:"_setElements",value:function(){var e,t=this,i=(null===(e=Wt(this,St,"f").getOptions().controls)||void 0===e?void 0:e.layers)||{};jt(this,Ot,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]},"f");var n=E(Wt(this,St,"f").getElement()),s=w(Wt(this,St,"f").getElement()),a=Object.keys(i),r=a.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),a.forEach((function(e){var a=c(e.split("-"),2),o=a[0],l=a[1];if(l){Wt(t,Ct,"f").classList.contains("op-controls__stacked")||Wt(t,Ct,"f").classList.add("op-controls__stacked");var f="op-controls-layer__".concat(o);if(!Wt(t,Ct,"f").querySelector(".".concat(f))){var u=document.createElement("div");u.className=f,Wt(t,Ct,"f").appendChild(u)}}else if(r){var d="op-controls-layer__center";if(!Wt(t,Ct,"f").querySelector(".".concat(d))){var h=document.createElement("div");h.className=d,Wt(t,Ct,"f").appendChild(h)}}var v=i?i[e]:null;v&&v.filter((function(e,t,i){return i.indexOf(e)===t})).forEach((function(i){var a=r&&!l?"center":o,f="".concat(i.charAt(0).toUpperCase()).concat(i.slice(1)),c=new(Wt(t,xt,"f")[f])(Wt(t,St,"f"),l||o,a);"settings"===i&&jt(t,Mt,c,"f"),(n||"fullscreen"!==i&&s)&&Wt(t,Ot,"f")[e].push(c)}))})),Wt(this,St,"f").getCustomControls().forEach((function(e){var i=c(e.position.split("-"),2),n=i[0],s=i[1],a=r&&!s?"center":n;e.layer=a,e.position=s||n,"right"===e.position?Wt(t,Ot,"f")[e.position].unshift(e):Wt(t,Ot,"f")[e.position].push(e)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(Wt(this,Ot,"f")).forEach((function(t){Wt(e,Ot,"f")[t].forEach((function(t){t.custom?e._createCustomElement(t):t.create()}))})),Object.keys(Wt(this,Ot,"f")).forEach((function(t){Wt(e,Ot,"f")[t].forEach((function(t){var i=t;if((!Wt(e,St,"f").getOptions().detachMenus||t instanceof ft)&&!i.custom&&"function"==typeof i.addSettings){var n=i.addSettings();Wt(e,Mt,"f")&&Object.keys(n).length&&Wt(e,Mt,"f").addItem(n.name,n.key,n.default,n.subitems,n.className)}}))}));var t=M("controlschanged");Wt(this,Ct,"f").dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,i){Wt(this,St,"f").getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}},{key:"_createCustomElement",value:function(e){var t=this,i=document.createElement(e.type);if(i.tabIndex=0,i.id=e.id,i.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),e.styles&&Object.assign(i.style,e.styles),"button"===e.type&&e.icon?i.innerHTML=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(A(e.icon),'">'):A(e.icon):e.content&&(i.innerHTML=A(e.content,!1)),"button"===e.type&&e.title&&(i.title=e.title),"button"!==e.type&&e.click&&"function"==typeof e.click&&i.setAttribute("aria-role","button"),"button"===e.type&&e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var n=document.createElement("div");n.className="op-settings op-settings__custom",n.id="".concat(e.id,"-menu"),n.setAttribute("aria-hidden","true");var s=e.subitems.map((function(t){var i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(A(t.icon),'">'):A(t.icon,!1)),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(i," ").concat(t.label,"</div>\n                </div>")}));n.innerHTML='<div class="op-settings__menu" role="menu">'.concat(s.join(""),"</div>"),Wt(this,St,"f").getContainer().appendChild(n),e.subitems.forEach((function(e){var t=n.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,b)})),i.addEventListener("click",(function(i){return t._toggleCustomMenu(i,n,e)}),b),Wt(this,St,"f").getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(n)}),b)}else e.click&&"function"==typeof e.click&&i.addEventListener("click",e.click,b);e.mouseenter&&"function"==typeof e.mouseenter&&i.addEventListener("mouseenter",e.mouseenter,b),e.mouseleave&&"function"==typeof e.mouseleave&&i.addEventListener("mouseleave",e.mouseleave,b),e.keydown&&"function"==typeof e.keydown&&i.addEventListener("keydown",e.keydown,b),e.blur&&"function"==typeof e.blur&&i.addEventListener("blur",e.blur,b),e.focus&&"function"==typeof e.focus&&i.addEventListener("focus",e.focus,b),e.layer&&("main"===e.layer?Wt(this,St,"f").getContainer().appendChild(i):this.getLayer(e.layer).appendChild(i)),e.init&&"function"==typeof e.init&&e.init(Wt(this,St,"f"))}},{key:"_destroyCustomElement",value:function(e){var t=this,i=this.getContainer().querySelector(".op-controls__".concat(e.id));if(i){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var n=Wt(this,St,"f").getContainer().querySelector("#".concat(e.id,"-menu"));n&&(e.subitems.forEach((function(e){var t=n.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),i.removeEventListener("click",(function(i){return t._toggleCustomMenu(i,n,e)})),Wt(this,St,"f").getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(n)})),n.remove())}e.click&&"function"==typeof e.click&&i.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&i.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&i.removeEventListener("mouseleave",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&i.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&i.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&i.removeEventListener("focus",e.focus),i.remove(),e.destroy&&"function"==typeof e.destroy&&e.destroy(Wt(this,St,"f"))}}}]),e}();Mt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,St=new WeakMap,Ot=new WeakMap,xt=new WeakMap;var Nt=Rt;function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t){return Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dt(e,t)}function Ft(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}function Bt(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return It(e)}function qt(e){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qt(e)}var Ht,Kt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Vt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},zt=function(){function e(t,i){s(this,e),Ht.set(this,void 0),this.element=t,this.media=i,this.promise=new Promise((function(e){e()}))}return r(e,[{key:"instance",get:function(){return Vt(this,Ht,"f")},set:function(e){Kt(this,Ht,e,"f")}},{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"volume",get:function(){return this.element.volume},set:function(e){this.element.volume=e}},{key:"muted",get:function(){return this.element.muted},set:function(e){this.element.muted=e}},{key:"playbackRate",get:function(){return this.element.playbackRate},set:function(e){this.element.playbackRate=e}},{key:"defaultPlaybackRate",get:function(){return this.element.defaultPlaybackRate},set:function(e){this.element.defaultPlaybackRate=e}},{key:"currentTime",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}]),e}();Ht=new WeakMap;var Ut=zt;function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=qt(e);if(t){var s=qt(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Bt(this,i)}}var Qt,$t,Jt,Yt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Xt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Zt=function(e){Ft(i,e);var t=Gt(i);function i(e,n,a){var r;return s(this,i),r=t.call(this,e,n),Qt.set(It(r),void 0),$t.set(It(r),{}),Jt.set(It(r),{}),Yt(It(r),Jt,a,"f"),r._assign=r._assign.bind(It(r)),r._preparePlayer=r._preparePlayer.bind(It(r)),r.promise="undefined"==typeof dashjs?k("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),r.promise.then((function(){Yt(It(r),Qt,dashjs.MediaPlayer().create(),"f"),r.instance=Xt(It(r),Qt,"f")})),r}return r(i,[{key:"canPlayType",value:function(e){return g&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),Xt(this,Qt,"f").attachSource(this.media.src);var t=M("loadedmetadata");this.element.dispatchEvent(t),Xt(this,$t,"f")||(Yt(this,$t,dashjs.MediaPlayer.events,"f"),Object.keys(Xt(this,$t,"f")).forEach((function(t){Xt(e,Qt,"f").on(Xt(e,$t,"f")[t],e._assign)})))}},{key:"destroy",value:function(){var e=this;Xt(this,$t,"f")&&(Object.keys(Xt(this,$t,"f")).forEach((function(t){Xt(e,Qt,"f").off(Xt(e,$t,"f")[t],e._assign)})),Yt(this,$t,[],"f")),Xt(this,Qt,"f").reset()}},{key:"src",set:function(e){var t=this;re(e)&&(this.destroy(),Yt(this,Qt,dashjs.MediaPlayer().create(),"f"),this._preparePlayer(),Xt(this,Qt,"f").attachSource(e.src),Yt(this,$t,dashjs.MediaPlayer.events,"f"),Object.keys(Xt(this,$t,"f")).forEach((function(e){Xt(t,Qt,"f").on(Xt(t,$t,"f")[e],t._assign)})))}},{key:"levels",get:function(){var e=[];if(Xt(this,Qt,"f")){var t=Xt(this,Qt,"f").getBitrateInfoListFor("video");t.length&&t.forEach((function(i){if(t[i]){var n=t[i],s=n.height,a=n.name,r={height:s,id:"".concat(i),label:a||null};e.push(r)}}))}return e}},{key:"level",get:function(){return Xt(this,Qt,"f")?Xt(this,Qt,"f").getQualityFor("video"):"-1"},set:function(e){"0"===e?Xt(this,Qt,"f").setAutoSwitchQuality(!0):(Xt(this,Qt,"f").setAutoSwitchQuality(!1),Xt(this,Qt,"f").setQualityFor("video",e))}},{key:"_assign",value:function(e){if("error"===e.type){var t=M("playererror",{detail:{message:e,type:"M(PEG)-DASH"}});this.element.dispatchEvent(t)}else{var i=M(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_preparePlayer",value:function(){Xt(this,Qt,"f").updateSettings(Object.assign({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}},Xt(this,Jt,"f")||{})),Xt(this,Qt,"f").initialize(),Xt(this,Qt,"f").attachView(this.element),Xt(this,Qt,"f").setAutoPlay(!1)}}]),i}(Ut);Qt=new WeakMap,$t=new WeakMap,Jt=new WeakMap;var ei=Zt;function ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=qt(e);if(t){var s=qt(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Bt(this,i)}}var ii,ni,si,ai=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ri=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},oi=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i},li=function(e){Ft(i,e);var t=ti(i);function i(e,n,a){var r;return s(this,i),r=t.call(this,e,n),ii.set(It(r),void 0),ni.set(It(r),{}),si.set(It(r),{}),ai(It(r),si,a,"f"),r.element=e,r.media=n,r._create=r._create.bind(It(r)),r._assign=r._assign.bind(It(r)),r.promise="undefined"==typeof flvjs?k("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),r.promise.then(r._create),r}return r(i,[{key:"canPlayType",value:function(e){return g&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;ri(this,ii,"f").unload(),ri(this,ii,"f").detachMediaElement(),ri(this,ii,"f").attachMediaElement(this.element),ri(this,ii,"f").load();var t=M("loadedmetadata");this.element.dispatchEvent(t),ri(this,ni,"f")||(ai(this,ni,flvjs.Events,"f"),Object.keys(ri(this,ni,"f")).forEach((function(t){ri(e,ii,"f").on(ri(e,ni,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ri(e,ni,"f")[t],n)}))})))}},{key:"destroy",value:function(){ri(this,ii,"f").destroy(),ai(this,ii,null,"f")}},{key:"src",set:function(e){oe(e)&&(this.destroy(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return ri(this,ii,"f")&&ri(this,ii,"f").levels&&ri(this,ii,"f").levels.length&&Object.keys(ri(this,ii,"f").levels).forEach((function(i){var n=ri(e,ii,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return ri(this,ii,"f")?ri(this,ii,"f").currentLevel:"-1"},set:function(e){ri(this,ii,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=ri(this,si,"f")||{},i=t.configs,n=oi(t,["configs"]);flvjs.LoggingControl.enableDebug=(null==n?void 0:n.debug)||!1,flvjs.LoggingControl.enableVerbose=(null==n?void 0:n.debug)||!1;var s=Object.assign(Object.assign({},n),{type:"flv",url:this.media.src});ai(this,ii,flvjs.createPlayer(s,i||{}),"f"),this.instance=ri(this,ii,"f"),ri(this,ni,"f")||(ai(this,ni,flvjs.Events,"f"),Object.keys(ri(this,ni,"f")).forEach((function(t){ri(e,ii,"f").on(ri(e,ni,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ri(e,ni,"f")[t],n)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var i=M("playererror",{detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}});this.element.dispatchEvent(i)}else{var n=M(e,{detail:{data:t}});this.element.dispatchEvent(n)}}}]),i}(Ut);ii=new WeakMap,ni=new WeakMap,si=new WeakMap;var fi=li;function ci(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=qt(e);if(t){var s=qt(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Bt(this,i)}}var ui,di,hi,vi,pi,mi,yi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},gi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},bi=function(e){Ft(i,e);var t=ci(i);function i(e,n,a,r){var o;return s(this,i),o=t.call(this,e,n),ui.set(It(o),void 0),di.set(It(o),{}),hi.set(It(o),0),vi.set(It(o),0),pi.set(It(o),void 0),mi.set(It(o),void 0),yi(It(o),pi,r||{},"f"),o.element=e,o.media=n,yi(It(o),mi,a,"f"),o._create=o._create.bind(It(o)),o._play=o._play.bind(It(o)),o._pause=o._pause.bind(It(o)),o._assign=o._assign.bind(It(o)),o.promise="undefined"==typeof Hls?k("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),o.promise.then(o._create),o}return r(i,[{key:"canPlayType",value:function(e){return function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n&&!y}()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;gi(this,ui,"f")&&(gi(this,ui,"f").detachMedia(),gi(this,ui,"f").loadSource(this.media.src),gi(this,ui,"f").attachMedia(this.element));var t=M("loadedmetadata");this.element.dispatchEvent(t),gi(this,di,"f")||(yi(this,di,Hls.Events,"f"),Object.keys(gi(this,di,"f")).forEach((function(t){gi(e,ui,"f").on(gi(e,di,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(gi(e,di,"f")[t],n)}))})))}},{key:"destroy",value:function(){var e=this;gi(this,ui,"f")&&gi(this,ui,"f").stopLoad(),gi(this,di,"f")&&Object.keys(gi(this,di,"f")).forEach((function(t){gi(e,ui,"f").off(gi(e,di,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(gi(e,di,"f")[t],n)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),gi(this,ui,"f")&&(gi(this,ui,"f").destroy(),yi(this,ui,null,"f"))}},{key:"src",set:function(e){var t=this;ae(e)&&(this.destroy(),yi(this,ui,new Hls(gi(this,pi,"f")),"f"),gi(this,ui,"f").loadSource(e.src),gi(this,ui,"f").attachMedia(this.element),yi(this,di,Hls.Events,"f"),Object.keys(gi(this,di,"f")).forEach((function(e){gi(t,ui,"f").on(gi(t,di,"f")[e],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t._assign(gi(t,di,"f")[e],n)}))})))}},{key:"levels",get:function(){var e=this,t=[];return gi(this,ui,"f")&&gi(this,ui,"f").levels&&gi(this,ui,"f").levels.length&&Object.keys(gi(this,ui,"f").levels).forEach((function(i){var n=gi(e,ui,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return gi(this,ui,"f")?gi(this,ui,"f").currentLevel:"-1"},set:function(e){gi(this,ui,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=!("auto"!==this.element.preload&&!gi(this,mi,"f"));gi(this,pi,"f").autoStartLoad=t,yi(this,ui,new Hls(gi(this,pi,"f")),"f"),this.instance=gi(this,ui,"f"),yi(this,di,Hls.Events,"f"),Object.keys(gi(this,di,"f")).forEach((function(t){gi(e,ui,"f").on(gi(e,di,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(gi(e,di,"f")[t],n)}))})),t||(this.element.addEventListener("play",this._play,b),this.element.addEventListener("pause",this._pause,b))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var i=M("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(i);var n=t[1].type,s=t[1].fatal,a=t[1];if(s)switch(n){case"mediaError":var r=(new Date).getTime();if(!gi(this,hi,"f")||r-gi(this,hi,"f")>3e3)yi(this,hi,(new Date).getTime(),"f"),gi(this,ui,"f").recoverMediaError();else if(!gi(this,vi,"f")||r-gi(this,vi,"f")>3e3)yi(this,vi,(new Date).getTime(),"f"),console.warn("Attempting to swap Audio Codec and recover from media error"),gi(this,ui,"f").swapAudioCodec(),gi(this,ui,"f").recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var o=M(n,{detail:{data:a}});this.element.dispatchEvent(o)}break;case"networkError":console.error("Network error");var l=M(n,{detail:{data:a}});this.element.dispatchEvent(l);break;default:gi(this,ui,"f").destroy();var f=M(n,{detail:{data:a}});this.element.dispatchEvent(f)}else{var c=M(n,{detail:{data:a}});this.element.dispatchEvent(c)}}else{var u=t[1];if("hlsLevelLoaded"===e&&!0===u.live){this.element.setAttribute("op-live__enabled","true");var d=M("timeupdate");this.element.dispatchEvent(d)}else if("hlsLevelUpdated"===e&&!0===u.live&&u.totalduration>120){this.element.setAttribute("op-dvr__enabled","true");var h=M("timeupdate");this.element.dispatchEvent(h)}else if("hlsFragParsingMetadata"===e){var v=M("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(v)}var p=M(e,{detail:{data:t[1]}});this.element.dispatchEvent(p)}}},{key:"_play",value:function(){gi(this,ui,"f")&&gi(this,ui,"f").startLoad()}},{key:"_pause",value:function(){gi(this,ui,"f")&&gi(this,ui,"f").stopLoad()}}]),i}(Ut);ui=new WeakMap,di=new WeakMap,hi=new WeakMap,vi=new WeakMap,pi=new WeakMap,mi=new WeakMap;var Ei=bi;function wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=qt(e);if(t){var s=qt(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Bt(this,i)}}var ki,_i,Ai,Li,Mi,Ti,Ci=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Si=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Oi=function(e){Ft(i,e);var t=wi(i);function i(e,n){var a;if(s(this,i),a=t.call(this,e,n),ki.set(It(a),void 0),_i.set(It(a),[]),Ai.set(It(a),!1),Li.set(It(a),0),Mi.set(It(a),!1),Ti.set(It(a),void 0),!w(e)&&!E(e))throw new TypeError("Native method only supports video/audio tags");return a._clearTimeout=a._clearTimeout.bind(It(a)),a._setTimeout=a._setTimeout.bind(It(a)),a._dispatchError=a._dispatchError.bind(It(a)),a._isDvrEnabled=a._isDvrEnabled.bind(It(a)),a._readMediadataInfo=a._readMediadataInfo.bind(It(a)),Ci(It(a),Ai,ae(n),"f"),a.element.addEventListener("playing",a._clearTimeout,b),a.element.addEventListener("stalled",a._setTimeout,b),a.element.addEventListener("error",a._dispatchError,b),a.element.addEventListener("loadeddata",a._isDvrEnabled,b),a.element.textTracks.addEventListener("addtrack",a._readMediadataInfo,b),a}return r(i,[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo)}},{key:"levels",get:function(){if(!Si(this,_i,"f").length)for(var e=this.element.querySelectorAll("source[title]"),t=0,i=e.length;t<i;++t){var n={height:0,id:"".concat(t),label:e[t].getAttribute("title")||""};Si(this,_i,"f").push(n)}return Si(this,_i,"f")}},{key:"level",get:function(){var e;return(null===(e=Si(this,ki,"f"))||void 0===e?void 0:e.id)||"-1"},set:function(e){var t=Si(this,_i,"f").findIndex((function(t){return t.id===e}));if(t>-1){Ci(this,ki,this.levels[t],"f");for(var i=this.element.querySelectorAll("source[title]"),n=0,s=i.length;n<s;++n){var a=i[n].getAttribute("src");a&&parseInt(Si(this,ki,"f").id,10)===n&&(this.element.src=a)}}}},{key:"src",set:function(e){this.element.src=e.src}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(Si(this,Ai,"f")&&e>120&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=M("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t,i=this,n=e;"metadata"===(null===(t=null==n?void 0:n.track)||void 0===t?void 0:t.kind)&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var s=M("metadataready",{detail:n});i.element.dispatchEvent(s)}}),b))}},{key:"_setTimeout",value:function(){var e=this;Si(this,Mi,"f")||void 0===window||(Ci(this,Mi,!0,"f"),Ci(this,Ti,window.setInterval((function(){var t;if(Si(e,Li,"f")>=30){clearInterval(Si(e,Ti,"f"));var i="Media download failed part-way due to a network error",n=M("playererror",{detail:{data:{message:i,error:2},message:i,type:"HTML5"}});e.element.dispatchEvent(n),Ci(e,Li,0,"f"),Ci(e,Mi,!1,"f")}else Ci(e,Li,(t=Si(e,Li,"f"),++t),"f")}),1e3),"f"))}},{key:"_clearTimeout",value:function(){Si(this,Ti,"f")&&(clearInterval(Si(this,Ti,"f")),Ci(this,Li,0,"f"),Ci(this,Mi,!1,"f"))}},{key:"_dispatchError",value:function(e){var t,i=e.target,n=null==i?void 0:i.error;switch(null==n?void 0:n.code){case null==n?void 0:n.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==n?void 0:n.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==n?void 0:n.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==n?void 0:n.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}var s=M("playererror",{detail:{data:Object.assign(Object.assign({},e),{message:t,error:null==n?void 0:n.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(s)}}]),i}(Ut);ki=new WeakMap,_i=new WeakMap,Ai=new WeakMap,Li=new WeakMap,Mi=new WeakMap,Ti=new WeakMap;var xi,Pi,ji,Wi,Ri,Ni,Ii,Di,Fi,Bi=Oi,qi=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Hi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ki=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Vi=function(){function e(t,i,n,a){s(this,e),xi.set(this,void 0),Pi.set(this,void 0),ji.set(this,void 0),Wi.set(this,void 0),Ri.set(this,void 0),Ni.set(this,void 0),Ii.set(this,!1),Di.set(this,{media:{},optionsKey:{},rules:[]}),Fi.set(this,void 0),Hi(this,xi,t,"f"),Hi(this,Ri,i,"f"),Hi(this,ji,this._getMediaFiles(),"f"),Hi(this,Di,a,"f"),Hi(this,Ni,n,"f")}return r(e,[{key:"canPlayType",value:function(e){return Ki(this,Pi,"f").canPlayType(e)}},{key:"load",value:function(){return qi(this,void 0,void 0,l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ki(this,Ii,"f")){e.next=2;break}return e.abrupt("return");case 2:if(Hi(this,Ii,!0,"f"),Ki(this,ji,"f").length){e.next=5;break}throw new TypeError("Media not set");case 5:if(Ki(this,Pi,"f")&&"function"==typeof Ki(this,Pi,"f").destroy&&(1===Ki(this,ji,"f").length&&Ki(this,ji,"f")[0].src===Ki(this,Pi,"f").media.src||Ki(this,Pi,"f").destroy()),Ki(this,ji,"f").some((function(e){try{Hi(t,Pi,t._invoke(e),"f")}catch(i){Hi(t,Pi,new Bi(Ki(t,xi,"f"),e),"f")}return Ki(t,Pi,"f").canPlayType(e.type)})),e.prev=7,null!==Ki(this,Pi,"f")){e.next=10;break}throw new TypeError("Media cannot be played with any valid media type");case 10:return e.next=12,Ki(this,Pi,"f").promise;case 12:Ki(this,Pi,"f").load(),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(7),Ki(this,Pi,"f")&&Ki(this,Pi,"f").destroy(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[7,15]])})))}},{key:"play",value:function(){return qi(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ki(this,Ii,"f")){e.next=7;break}return Hi(this,Ii,!0,"f"),e.next=4,this.load();case 4:Hi(this,Ii,!1,"f"),e.next=9;break;case 7:return e.next=9,Ki(this,Pi,"f").promise;case 9:return Hi(this,Wi,Ki(this,Pi,"f").play(),"f"),e.abrupt("return",Ki(this,Wi,"f"));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){return qi(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Ki(this,Wi,"f")){e.next=3;break}return e.next=3,Ki(this,Wi,"f");case 3:Ki(this,Pi,"f").pause();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){Ki(this,Pi,"f")&&Ki(this,Pi,"f").destroy()}},{key:"src",get:function(){return Ki(this,ji,"f")},set:function(e){if("string"==typeof e?Ki(this,ji,"f").push({src:e,type:le(e,Ki(this,xi,"f"))}):Array.isArray(e)?Hi(this,ji,e,"f"):"object"===t(e)&&Ki(this,ji,"f").push(e),Hi(this,ji,Ki(this,ji,"f").filter((function(e){return e.src})),"f"),Ki(this,ji,"f").length>0){var i=c(Ki(this,ji,"f"),1)[0];Ki(this,xi,"f").src&&Ki(this,xi,"f").setAttribute("data-op-file",Ki(this,ji,"f")[0].src),Ki(this,xi,"f").src=i.src,Hi(this,Fi,i,"f"),Ki(this,Pi,"f")&&(Ki(this,Pi,"f").src=i)}else Ki(this,xi,"f").src=""}},{key:"current",get:function(){return Ki(this,Fi,"f")}},{key:"mediaFiles",get:function(){return Ki(this,ji,"f")},set:function(e){Hi(this,ji,e,"f")}},{key:"volume",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").volume:Ki(this,xi,"f").volume},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").volume=e)}},{key:"muted",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").muted:Ki(this,xi,"f").muted},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").muted=e)}},{key:"playbackRate",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").playbackRate:Ki(this,xi,"f").playbackRate},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").playbackRate=e)}},{key:"defaultPlaybackRate",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").defaultPlaybackRate:Ki(this,xi,"f").defaultPlaybackRate},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").defaultPlaybackRate=e)}},{key:"currentTime",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").currentTime:Ki(this,xi,"f").currentTime},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").currentTime=e)}},{key:"duration",get:function(){var e=Ki(this,Pi,"f")?Ki(this,Pi,"f").duration:Ki(this,xi,"f").duration;return e===1/0&&Ki(this,xi,"f").seekable&&Ki(this,xi,"f").seekable.length?Ki(this,xi,"f").seekable.end(0):e}},{key:"paused",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").paused:Ki(this,xi,"f").paused}},{key:"ended",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").ended:Ki(this,xi,"f").ended}},{key:"loaded",get:function(){return Ki(this,Ii,"f")},set:function(e){Hi(this,Ii,e,"f")}},{key:"level",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").level:-1},set:function(e){Ki(this,Pi,"f")&&(Ki(this,Pi,"f").level=e)}},{key:"levels",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").levels:[]}},{key:"instance",get:function(){return Ki(this,Pi,"f")?Ki(this,Pi,"f").instance:null}},{key:"_getMediaFiles",value:function(){var e=[],t=Ki(this,xi,"f").querySelectorAll("source"),i=Ki(this,xi,"f").src;i&&e.push({src:i,type:Ki(this,xi,"f").getAttribute("type")||le(i,Ki(this,xi,"f"))});for(var n=0,s=t.length;n<s;n++){var a=t[n],r=a.src;if(e.push({src:r,type:a.getAttribute("type")||le(r,Ki(this,xi,"f"))}),0===n){var o=e[0];Hi(this,Fi,o,"f")}}return e.length||e.push({src:"",type:le("",Ki(this,xi,"f"))}),e}},{key:"_invoke",value:function(e){var t,i,n,s=this,a=Ki(this,xi,"f").canPlayType("application/vnd.apple.mpegurl")||Ki(this,xi,"f").canPlayType("application/x-mpegURL");Hi(this,Fi,e,"f");var r,o=(Ki(this,Ri,"f").controls||{}).layers,l=!1;if(o&&Object.keys(o).forEach((function(e){var t=o?o[e]:null;t&&t.indexOf("levels")>-1&&(l=!0)})),Object.keys(Ki(this,Di,"f").media).length)return Ki(this,Di,"f").rules.forEach((function(t){var i=t(e.src);if(i){var n=Ki(s,Di,"f").media[i],a=Ki(s,Ri,"f")[Ki(s,Di,"f").optionsKey[i]]||void 0;r=n(Ki(s,xi,"f"),e,Ki(s,Ni,"f"),a)}})),r?(r.create(),r):new Bi(Ki(this,xi,"f"),e);if(ae(e)){if(a&&Ki(this,Ri,"f").forceNative&&!l)return new Bi(Ki(this,xi,"f"),e);var f=(null===(t=Ki(this,Ri,"f"))||void 0===t?void 0:t.hls)||void 0;return new Ei(Ki(this,xi,"f"),e,Ki(this,Ni,"f"),f)}if(re(e)){var c=(null===(i=Ki(this,Ri,"f"))||void 0===i?void 0:i.dash)||void 0;return new ei(Ki(this,xi,"f"),e,c)}if(oe(e)){var u=(null===(n=Ki(this,Ri,"f"))||void 0===n?void 0:n.flv)||{debug:!1,type:"flv",url:e.src};return new fi(Ki(this,xi,"f"),e,u)}return new Bi(Ki(this,xi,"f"),e)}}]),e}();xi=new WeakMap,Pi=new WeakMap,ji=new WeakMap,Wi=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Ii=new WeakMap,Di=new WeakMap,Fi=new WeakMap;var zi,Ui,Gi,Qi,$i,Ji,Yi,Xi,Zi,en,tn,nn,sn,an,rn,on,ln,fn,cn,un,dn,hn,vn,pn,mn,yn,gn,bn,En,wn,kn,_n,An,Ln=Vi,Mn=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Tn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Cn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Sn=function(){function e(t,i,n,a,r){var o,l,f,c,u=this;s(this,e),this.loadedAd=!1,zi.set(this,!1),Ui.set(this,!1),Gi.set(this,!1),Qi.set(this,!1),$i.set(this,0),Ji.set(this,void 0),Yi.set(this,!1),Xi.set(this,0),Zi.set(this,0),en.set(this,null),tn.set(this,void 0),nn.set(this,void 0),sn.set(this,void 0),an.set(this,[]),rn.set(this,void 0),on.set(this,void 0),ln.set(this,void 0),fn.set(this,void 0),cn.set(this,void 0),un.set(this,void 0),dn.set(this,void 0),hn.set(this,void 0),vn.set(this,!1),pn.set(this,!1),mn.set(this,!1),yn.set(this,void 0),gn.set(this,0),bn.set(this,void 0),En.set(this,void 0),wn.set(this,0),kn.set(this,[]),_n.set(this,!1),An.set(this,null);var d={autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},audioSkip:{enabled:!0,label:"Skip Ad",remainingLabel:"Skip in [[secs]] seconds"},debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,publisherId:void 0,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:void 0,src:[],vpaidMode:"enabled"};Tn(this,tn,t,"f"),Tn(this,rn,i,"f"),Tn(this,nn,t.getMedia(),"f"),Tn(this,sn,t.getElement(),"f"),Tn(this,vn,n||!1,"f"),Tn(this,Yi,t.getElement().muted,"f"),Tn(this,pn,a||!1,"f"),Tn(this,yn,Object.assign(Object.assign({},d),r),"f"),(null==r?void 0:r.customClick)&&Object.keys(r.customClick).length&&(Cn(this,yn,"f").customClick=Object.assign(Object.assign({},d.customClick),r.customClick)),Tn(this,mn,!1,"f"),Tn(this,bn,Cn(this,sn,"f").volume,"f"),Tn(this,Ji,Cn(this,bn,"f"),"f");var h=(null===(o=Cn(this,yn,"f"))||void 0===o?void 0:o.debug)?null===(f=null===(l=Cn(this,yn,"f"))||void 0===l?void 0:l.sdkPath)||void 0===f?void 0:f.replace(/(\.js$)/,"_debug.js"):null===(c=Cn(this,yn,"f"))||void 0===c?void 0:c.sdkPath;this.load=this.load.bind(this),this.resizeAds=this.resizeAds.bind(this),this._handleClickInContainer=this._handleClickInContainer.bind(this),this._handleSkipAds=this._handleSkipAds.bind(this),this._loaded=this._loaded.bind(this),this._error=this._error.bind(this),this._assign=this._assign.bind(this),this._contentLoadedAction=this._contentLoadedAction.bind(this),this._loadedMetadataHandler=this._loadedMetadataHandler.bind(this),this._contentEndedListener=this._contentEndedListener.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._onContentPauseRequested=this._onContentPauseRequested.bind(this),this._onContentResumeRequested=this._onContentResumeRequested.bind(this),Tn(this,on,!h||"undefined"!=typeof google&&void 0!==google.ima?new Promise((function(e){e()})):k(h),"f"),Cn(this,on,"f").then((function(){u.load()})).catch((function(e){var t="Ad script could not be loaded; please check if you have an AdBlock ";t+="turned on, or if you provided a valid URL is correct",console.error("Ad error: ".concat(t,"."));var i=M("playererror",{detail:{data:e,message:t,type:"Ads"}});Cn(u,sn,"f").dispatchEvent(i)}))}return r(e,[{key:"load",value:function(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("undefined"!=typeof google&&google.ima&&(n||!this.loadedAd||!Cn(this,yn,"f").autoPlayAdBreaks)&&(Cn(this,yn,"f").autoPlayAdBreaks||n)){this.loadedAd=!0;var s=Cn(this,tn,"f").getContainer().querySelector(".op-ads");if(s&&s.parentNode&&s.parentNode.removeChild(s),Tn(this,Qi,!0,"f"),Tn(this,fn,document.createElement("div"),"f"),Cn(this,fn,"f").className="op-ads",Cn(this,fn,"f").tabIndex=-1,Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.insertBefore(Cn(this,fn,"f"),Cn(this,sn,"f").nextSibling),Cn(this,fn,"f").addEventListener("click",this._handleClickInContainer),(null===(e=Cn(this,yn,"f").customClick)||void 0===e?void 0:e.enabled)&&(Tn(this,cn,document.createElement("div"),"f"),Cn(this,cn,"f").className="op-ads__click-container",Cn(this,cn,"f").innerHTML='<div class="op-ads__click-label">'.concat(Cn(this,yn,"f").customClick.label,"</div>"),Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.insertBefore(Cn(this,cn,"f"),Cn(this,sn,"f").nextSibling)),w(Cn(this,sn,"f"))&&(null===(t=Cn(this,yn,"f").audioSkip)||void 0===t?void 0:t.enabled)){if(null===(i=Cn(this,yn,"f").audioSkip)||void 0===i?void 0:i.element){var a=Cn(this,yn,"f").audioSkip||{},r=a.element;if("string"==typeof r){var o=document.getElementById(r);o&&Tn(this,un,o,"f")}else r instanceof HTMLElement&&Tn(this,un,r,"f")}else Tn(this,un,document.createElement("button"),"f"),Cn(this,un,"f").className="op-ads__skip hidden",Cn(this,tn,"f").getControls().getContainer().appendChild(Cn(this,un,"f"));Cn(this,un,"f")&&Cn(this,un,"f").addEventListener("click",this._handleSkipAds,b)}Tn(this,kn,Cn(this,nn,"f").src,"f");var l={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(l[Cn(this,yn,"f").vpaidMode||"enabled"]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(Cn(this,yn,"f").autoPlayAdBreaks),google.ima.settings.setNumRedirects(Cn(this,yn,"f").numRedirects),google.ima.settings.setLocale(Cn(this,yn,"f").language),Cn(this,yn,"f").sessionId&&google.ima.settings.setSessionId(Cn(this,yn,"f").sessionId),Cn(this,yn,"f").publisherId&&google.ima.settings.setPpid(Cn(this,yn,"f").publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("3.0.0"),Tn(this,dn,new google.ima.AdDisplayContainer(Cn(this,fn,"f"),Cn(this,sn,"f"),Cn(this,cn,"f")),"f"),Tn(this,ln,new google.ima.AdsLoader(Cn(this,dn,"f")),"f"),Cn(this,ln,"f").addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded,b),Cn(this,ln,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,b),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,b),Cn(this,sn,"f").addEventListener("loadedmetadata",this._handleResizeAds,b),!0!==Cn(this,vn,"f")&&!0!==Cn(this,pn,"f")&&!0!==n&&!0!==Cn(this,yn,"f").enablePreloading&&!0!==Cn(this,mn,"f")||(Cn(this,Ui,"f")||(Tn(this,Ui,!0,"f"),Cn(this,dn,"f").initialize()),this._requestAds())}}},{key:"play",value:function(){return Mn(this,void 0,void 0,l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cn(this,Ui,"f")){e.next=4;break}return Tn(this,mn,!0,"f"),this._initNotDoneAds(),e.abrupt("return");case 4:if(Cn(this,en,"f"))try{Cn(this,$i,"f")||!1!==Cn(this,Gi,"f")?Cn(this,en,"f").resume():Cn(this,en,"f").start(),Tn(this,Gi,!0,"f"),t=M("play"),Cn(this,sn,"f").dispatchEvent(t)}catch(e){this._resumeMedia()}case 5:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){if(Cn(this,en,"f")){Tn(this,Gi,!1,"f"),Cn(this,en,"f").pause();var e=M("pause");Cn(this,sn,"f").dispatchEvent(e)}}},{key:"destroy",value:function(){var e,t,i=this;Cn(this,en,"f")&&(Cn(this,en,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Cn(this,an,"f")&&Cn(this,an,"f").forEach((function(e){Cn(i,en,"f").removeEventListener(e,i._assign)}))),Tn(this,an,[],"f");var n=Cn(this,tn,"f").getControls(),s=n?n.events.mouse:{};Object.keys(s).forEach((function(e){Cn(i,fn,"f")&&Cn(i,fn,"f").removeEventListener(e,s[e])})),Cn(this,ln,"f")&&(Cn(this,ln,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),Cn(this,ln,"f").removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded));var a=!Array.isArray(Cn(this,rn,"f"))||Cn(this,gn,"f")>Cn(this,rn,"f").length;Cn(this,en,"f")&&a&&Cn(this,en,"f").destroy(),(null===(e=Cn(this,yn,"f").customClick)||void 0===e?void 0:e.enabled)&&Cn(this,cn,"f")&&Cn(this,cn,"f").remove(),(null===(t=Cn(this,yn,"f").audioSkip)||void 0===t?void 0:t.enabled)&&Cn(this,un,"f")&&(Cn(this,un,"f").removeEventListener("click",this._handleSkipAds),Cn(this,un,"f").remove()),(v||p)&&Cn(this,sn,"f").removeEventListener("loadedmetadata",this._contentLoadedAction),Cn(this,sn,"f").removeEventListener("loadedmetadata",this._handleResizeAds),Cn(this,sn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),Cn(this,sn,"f").removeEventListener("ended",this._contentEndedListener),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),Cn(this,fn,"f")&&(Cn(this,fn,"f").removeEventListener("click",this._handleClickInContainer),Cn(this,fn,"f").remove()),this.loadPromise=null,this.loadedAd=!1,Tn(this,Ui,!1,"f"),Tn(this,mn,!1,"f"),Tn(this,Xi,0,"f"),Tn(this,Zi,0,"f"),Tn(this,An,null,"f")}},{key:"resizeAds",value:function(e,t){var i=this;if(Cn(this,en,"f")){var n=Cn(this,sn,"f"),s="true"===n.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,a=e,r=e?e.toString():"";e&&r.indexOf("%")>-1&&Cn(this,sn,"f").parentElement&&(a=Cn(this,sn,"f").parentElement.offsetWidth*(parseInt(r,10)/100));var o,l=t,f=t?t.toString():"";t&&f.indexOf("%")>-1&&Cn(this,sn,"f").parentElement&&(l=Cn(this,sn,"f").parentElement.offsetHeight*(parseInt(f,10)/100)),o&&"undefined"!=typeof window&&window.cancelAnimationFrame(o),"undefined"!=typeof window&&(o=window.requestAnimationFrame((function(){Cn(i,en,"f").resize(a||n.offsetWidth,l||n.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return Cn(this,en,"f")}},{key:"getAdsLoader",value:function(){return Cn(this,ln,"f")}},{key:"started",value:function(){return Cn(this,Qi,"f")}},{key:"src",set:function(e){Tn(this,rn,e,"f")}},{key:"isDone",set:function(e){Tn(this,Ui,e,"f")}},{key:"playRequested",set:function(e){Tn(this,mn,e,"f")}},{key:"volume",get:function(){return Cn(this,en,"f")?Cn(this,en,"f").getVolume():Cn(this,bn,"f")},set:function(e){Cn(this,en,"f")&&(Tn(this,Ji,e,"f"),Cn(this,en,"f").setVolume(e),this._setMediaVolume(e),Tn(this,Yi,0===e,"f"))}},{key:"muted",get:function(){return Cn(this,Yi,"f")},set:function(e){Cn(this,en,"f")&&(e?(Cn(this,en,"f").setVolume(0),Tn(this,Yi,!0,"f"),this._setMediaVolume(0)):(Cn(this,en,"f").setVolume(Cn(this,Ji,"f")),Tn(this,Yi,!1,"f"),this._setMediaVolume(Cn(this,Ji,"f"))))}},{key:"currentTime",get:function(){return Cn(this,Zi,"f")},set:function(e){Tn(this,Zi,e,"f")}},{key:"duration",get:function(){return Cn(this,Xi,"f")}},{key:"paused",get:function(){return!Cn(this,Gi,"f")}},{key:"ended",get:function(){return Cn(this,zi,"f")}},{key:"_assign",value:function(e){var t,i,n=this,s=e.getAd();switch(s&&Tn(this,An,s,"f"),e.type){case google.ima.AdEvent.Type.LOADED:if(s.isLinear()){if(h&&E(Cn(this,sn,"f"))&&(Cn(this,sn,"f").controls=!1),Tn(this,Xi,s.getDuration(),"f"),Tn(this,Zi,s.getDuration(),"f"),!Cn(this,_n,"f")&&!v&&!p){var a=M("waiting");Cn(this,sn,"f").dispatchEvent(a);var r=M("loadedmetadata");Cn(this,sn,"f").dispatchEvent(r),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(s.isLinear()){Cn(this,sn,"f").parentElement&&!Cn(this,sn,"f").parentElement.classList.contains("op-ads--active")&&Cn(this,sn,"f").parentElement.classList.add("op-ads--active"),Cn(this,nn,"f").paused||Cn(this,nn,"f").pause(),Tn(this,Gi,!0,"f");var o,l=M("play");if(Cn(this,sn,"f").dispatchEvent(l),o||(this.resizeAds(),o=!0),Cn(this,nn,"f").ended){Tn(this,zi,!1,"f");var f=M("adsmediaended");Cn(this,sn,"f").dispatchEvent(f)}"undefined"!=typeof window&&Tn(this,$i,window.setInterval((function(){if(!0===Cn(n,Gi,"f")){Tn(n,Zi,Math.round(Cn(n,en,"f").getRemainingTime()),"f");var e=M("timeupdate");Cn(n,sn,"f").dispatchEvent(e)}}),350),"f")}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(s.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var c=M("adsskipped");Cn(this,sn,"f").dispatchEvent(c)}Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.classList.remove("op-ads--active"),Tn(this,Gi,!1,"f"),clearInterval(Cn(this,$i,"f"))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(s.isLinear()){var u=M("volumechange");Cn(this,sn,"f").dispatchEvent(u)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(s.isLinear()&&(Tn(this,Gi,!1,"f"),Tn(this,zi,!0,"f"),Tn(this,$i,0,"f"),Tn(this,Yi,!1,"f"),Tn(this,Qi,!1,"f"),Tn(this,An,null,"f"),Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.classList.remove("op-ads--active"),this.destroy(),Cn(this,sn,"f").currentTime>=Cn(this,sn,"f").duration)){var d=M("ended");Cn(this,sn,"f").dispatchEvent(d)}break;case google.ima.AdEvent.Type.CLICK:var m=M("pause");Cn(this,sn,"f").dispatchEvent(m);break;case google.ima.AdEvent.Type.AD_BREAK_READY:Cn(this,yn,"f").autoPlayAdBreaks||this.play();break;case google.ima.AdEvent.Type.AD_PROGRESS:var y=e.getAdData(),g=Cn(this,An,"f")?Cn(this,An,"f").getSkipTimeOffset():-1;if(Cn(this,un,"f"))if(-1!==g){var b=Cn(this,en,"f").getAdSkippableState(),w=Math.ceil(g-y.currentTime);Cn(this,un,"f").classList.remove("hidden"),b?(Cn(this,un,"f").textContent=(null===(t=Cn(this,yn,"f").audioSkip)||void 0===t?void 0:t.label)||"",Cn(this,un,"f").classList.remove("disabled")):(Cn(this,un,"f").textContent=(null===(i=Cn(this,yn,"f").audioSkip)||void 0===i?void 0:i.remainingLabel.replace("[[secs]]",w.toString()))||"",Cn(this,un,"f").classList.add("disabled"))}else Cn(this,un,"f").classList.add("hidden")}if(e.type===google.ima.AdEvent.Type.LOG){var k=e.getAdData();if(k.adError){var _=k.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(_));var A=M("playererror",{detail:{data:k.adError,message:_,type:"Ads"}});Cn(this,sn,"f").dispatchEvent(A)}}else{var L=M("ads".concat(e.type));Cn(this,sn,"f").dispatchEvent(L)}}},{key:"_error",value:function(e){var t,i=e.getError(),n=M("playererror",{detail:{data:i,message:i.toString(),type:"Ads"}});Cn(this,sn,"f").dispatchEvent(n);Array.isArray(Cn(this,rn,"f"))&&Cn(this,rn,"f").length>1&&Cn(this,gn,"f")<Cn(this,rn,"f").length-1?(Tn(this,gn,(t=Cn(this,gn,"f"),++t),"f"),this.destroy(),Tn(this,Qi,!0,"f"),Tn(this,mn,!0,"f"),this.load(!0),console.warn("Ad warning: ".concat(i.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(i.getErrorCode())>-1?(Cn(this,en,"f")&&Cn(this,en,"f").destroy(),console.error("Ad error: ".concat(i.toString()))):console.warn("Ad warning: ".concat(i.toString())),Tn(this,An,null,"f"),!0!==Cn(this,vn,"f")&&!0!==Cn(this,pn,"f")&&!0!==Cn(this,Qi,"f")||(Tn(this,Gi,!1,"f"),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=Cn(this,yn,"f").enablePreloading,Tn(this,en,e.getAdsManager(Cn(this,sn,"f"),t),"f"),this._start(Cn(this,en,"f")),this.loadPromise=new Promise((function(e){e()}))}},{key:"_start",value:function(e){var t=this;Cn(this,cn,"f")&&e.isCustomClickTrackingUsed()&&Cn(this,cn,"f").classList.add("op-ads__click-container--visible"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested,b),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested,b),Tn(this,an,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG],"f"),Cn(this,yn,"f").autoPlayAdBreaks||Cn(this,an,"f").push(google.ima.AdEvent.Type.AD_BREAK_READY);var i=Cn(this,tn,"f").getControls(),n=i?i.events.mouse:{};if(Object.keys(n).forEach((function(e){Cn(t,fn,"f")&&Cn(t,fn,"f").addEventListener(e,n[e],b)})),Cn(this,an,"f").forEach((function(i){e.addEventListener(i,t._assign,b)})),!0===Cn(this,vn,"f")||!0===Cn(this,pn,"f")||!0===Cn(this,mn,"f")){if(Tn(this,mn,!1,"f"),!Cn(this,Ui,"f"))return void this._initNotDoneAds();e.init(Cn(this,sn,"f").offsetWidth,Cn(this,sn,"f").offsetHeight,Cn(this,sn,"f").parentElement&&"true"===Cn(this,sn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var s=M("play");Cn(this,sn,"f").dispatchEvent(s)}else!0===Cn(this,yn,"f").enablePreloading&&e.init(Cn(this,sn,"f").offsetWidth,Cn(this,sn,"f").offsetHeight,Cn(this,sn,"f").parentElement&&"true"===Cn(this,sn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){Cn(this,dn,"f")?(Tn(this,Ui,!0,"f"),Cn(this,dn,"f").initialize(),v||p?(Tn(this,En,this._contentLoadedAction,"f"),Cn(this,sn,"f").addEventListener("loadedmetadata",this._contentLoadedAction,b),Cn(this,sn,"f").load()):this._contentLoadedAction()):(this.load(),this.loadedAd=!1)}},{key:"_contentEndedListener",value:function(){Tn(this,zi,!0,"f"),Tn(this,Gi,!1,"f"),Tn(this,Qi,!1,"f"),Cn(this,ln,"f").contentComplete()}},{key:"_onContentPauseRequested",value:function(){Cn(this,sn,"f").removeEventListener("ended",this._contentEndedListener),Tn(this,wn,Cn(this,nn,"f").currentTime,"f"),Cn(this,Qi,"f")?Cn(this,nn,"f").pause():Tn(this,Qi,!0,"f");var e=M("play");Cn(this,sn,"f").dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(Cn(this,sn,"f").addEventListener("ended",this._contentEndedListener,b),Cn(this,sn,"f").addEventListener("loadedmetadata",this._loadedMetadataHandler,b),v||p)Cn(this,nn,"f").src=Cn(this,kn,"f"),Cn(this,nn,"f").load(),this._prepareMedia(),Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.classList.add("op-ads--active");else{var e=M("loadedmetadata");Cn(this,sn,"f").dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){var e;Array.isArray(Cn(this,rn,"f"))?(Tn(this,gn,(e=Cn(this,gn,"f"),++e),"f"),Cn(this,gn,"f")<=Cn(this,rn,"f").length-1?(Cn(this,en,"f")&&Cn(this,en,"f").destroy(),Cn(this,ln,"f").contentComplete(),Tn(this,mn,!0,"f"),Tn(this,Qi,!0,"f"),Tn(this,Ui,!1,"f"),this.load(!0)):(Cn(this,yn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):Cn(this,sn,"f").seekable.length?Cn(this,sn,"f").seekable.end(0)>Cn(this,wn,"f")&&(Cn(this,yn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler,100)}},{key:"_resumeMedia",value:function(){var e=this;if(Tn(this,$i,0,"f"),Tn(this,Yi,!1,"f"),Tn(this,Qi,!1,"f"),Tn(this,Xi,0,"f"),Tn(this,Zi,0,"f"),Cn(this,sn,"f").parentElement&&Cn(this,sn,"f").parentElement.classList.remove("op-ads--active"),Cn(this,nn,"f").ended){var t=M("ended");Cn(this,sn,"f").dispatchEvent(t)}else try{Cn(this,nn,"f").play(),setTimeout((function(){var t=M("play");Cn(e,sn,"f").dispatchEvent(t)}),50)}catch(e){console.error(e)}}},{key:"_requestAds",value:function(){Tn(this,hn,new google.ima.AdsRequest,"f");var e=Array.isArray(Cn(this,rn,"f"))?Cn(this,rn,"f")[Cn(this,gn,"f")]:Cn(this,rn,"f");!function(e){var t;if("undefined"==typeof DOMParser)return!1;t=function(e){return(new DOMParser).parseFromString(e,"text/xml")};try{if(t(e).getElementsByTagName("parsererror").length>0)return!1}catch(e){return!1}return!0}(e)?Cn(this,hn,"f").adTagUrl=e:Cn(this,hn,"f").adsResponse=e;var t=Cn(this,sn,"f").parentElement?Cn(this,sn,"f").parentElement.offsetWidth:0,i=Cn(this,sn,"f").parentElement?Cn(this,sn,"f").parentElement.offsetHeight:0;Cn(this,hn,"f").linearAdSlotWidth=t,Cn(this,hn,"f").linearAdSlotHeight=i,Cn(this,hn,"f").nonLinearAdSlotWidth=t,Cn(this,hn,"f").nonLinearAdSlotHeight=i/3,Cn(this,hn,"f").setAdWillAutoPlay(Cn(this,vn,"f")),Cn(this,hn,"f").setAdWillPlayMuted(Cn(this,pn,"f")),Cn(this,ln,"f").requestAds(Cn(this,hn,"f"))}},{key:"_contentLoadedAction",value:function(){Cn(this,En,"f")&&(Cn(this,sn,"f").removeEventListener("loadedmetadata",Cn(this,En,"f")),Tn(this,En,null,"f")),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){Cn(this,en,"f")&&Cn(this,en,"f").destroy(),Cn(this,ln,"f").contentComplete(),Tn(this,Ui,!1,"f"),Tn(this,mn,!0,"f")}},{key:"_prepareMedia",value:function(){Cn(this,nn,"f").currentTime=Cn(this,wn,"f"),Cn(this,sn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){Cn(this,nn,"f").volume=e,Cn(this,nn,"f").muted=0===e}},{key:"_handleClickInContainer",value:function(){if(Cn(this,nn,"f").paused){var e=M("paused");Cn(this,sn,"f").dispatchEvent(e),this.pause()}}},{key:"_handleResizeAds",value:function(){this.resizeAds()}},{key:"_handleSkipAds",value:function(){Cn(this,en,"f").skip()}}]),e}();zi=new WeakMap,Ui=new WeakMap,Gi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,an=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,fn=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,vn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap,gn=new WeakMap,bn=new WeakMap,En=new WeakMap,wn=new WeakMap,kn=new WeakMap,_n=new WeakMap,An=new WeakMap;var On,xn,Pn,jn,Wn,Rn,Nn,In,Dn,Fn,Bn,qn,Hn,Kn,Vn,zn,Un=Sn,Gn=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Qn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},$n=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Jn=function(){function i(e,t){var n;s(this,i),this.proxy=null,On.set(this,void 0),xn.set(this,void 0),Pn.set(this,""),jn.set(this,void 0),Wn.set(this,void 0),Rn.set(this,void 0),Nn.set(this,{}),In.set(this,!1),Dn.set(this,void 0),Fn.set(this,!1),Bn.set(this,!1),qn.set(this,!1),Hn.set(this,void 0),Kn.set(this,[]),Vn.set(this,void 0),zn.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:void 0,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},media:{pauseOnClick:!1},mode:"responsive",onError:function(e){return console.error(e)},pauseOthers:!0,progress:{allowRewind:!0,allowSkip:!0,duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,useDeviceVolume:!0,width:0}),Qn(this,jn,e instanceof HTMLMediaElement?e:document.getElementById(e),"f"),$n(this,jn,"f")&&(Qn(this,In,$n(this,jn,"f").autoplay||!1,"f"),"string"==typeof t||Array.isArray(t)||this._mergeOptions(t),$n(this,jn,"f").volume=$n(this,Hn,"f").startVolume||1,$n(this,Hn,"f").ads&&$n(this,Hn,"f").ads.src&&Qn(this,Wn,$n(this,Hn,"f").ads.src,"f"),((null===(n=$n(this,Hn,"f"))||void 0===n?void 0:n.startTime)||0)>0&&($n(this,jn,"f").currentTime=$n(this,Hn,"f").startTime||0),Qn(this,Dn,$n(this,jn,"f").volume,"f")),this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this)}return r(i,[{key:"init",value:function(){return Gn(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isValid()){e.next=9;break}return this._wrapInstance(),e.next=4,this._prepareMedia();case 4:this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),i.instances[this.id]=this;case 9:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return Gn(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($n(this,Rn,"f")){e.next=4;break}return e.next=3,this._prepareMedia();case 3:return e.abrupt("return",$n(this,Rn,"f").load());case 4:return $n(this,Rn,"f").loaded=!1,e.abrupt("return",this.isMedia()?$n(this,Rn,"f").load():void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"play",value:function(){return Gn(this,void 0,void 0,l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($n(this,Rn,"f").loaded){e.next=4;break}return e.next=3,$n(this,Rn,"f").load();case 3:$n(this,Rn,"f").loaded=!0;case 4:if(!$n(this,xn,"f")){e.next=9;break}return $n(this,xn,"f").playRequested=!0,e.next=8,$n(this,xn,"f").loadPromise;case 8:return e.abrupt("return",$n(this,xn,"f").play());case 9:return e.abrupt("return",$n(this,Rn,"f").play());case 10:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){$n(this,xn,"f")?$n(this,xn,"f").pause():$n(this,Rn,"f").pause()}},{key:"stop",value:function(){this.pause(),$n(this,Rn,"f")&&($n(this,Rn,"f").currentTime=0,this.src=[{src:"",type:"video/mp4"}])}},{key:"destroy",value:function(){var e,t=this;$n(this,xn,"f")&&($n(this,xn,"f").pause(),$n(this,xn,"f").destroy()),$n(this,Vn,"f")&&$n(this,Vn,"f").destroy();var n=$n(this,jn,"f");$n(this,Rn,"f")&&$n(this,Rn,"f").destroy(),Object.keys($n(this,Nn,"f")).forEach((function(e){n.removeEventListener(e,$n(t,Nn,"f")[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),$n(this,In,"f")&&!$n(this,qn,"f")&&E($n(this,jn,"f"))&&n.removeEventListener("canplay",this._autoplay),$n(this,On,"f")&&$n(this,On,"f").destroy(),E($n(this,jn,"f"))&&(this.playBtn&&this.playBtn.remove(),this.loader&&this.loader.remove()),(null===(e=$n(this,Hn,"f"))||void 0===e?void 0:e.onError)&&$n(this,jn,"f").removeEventListener("playererror",$n(this,Hn,"f").onError),n.controls=!0,n.setAttribute("id",$n(this,Pn,"f")),n.removeAttribute("op-live__enabled"),n.removeAttribute("op-dvr__enabled");var s="fit"!==$n(this,Hn,"f").mode||w(n)?n.parentElement:n.closest(".op-player__fit--wrapper");s&&s.parentNode&&s.parentNode.replaceChild(n,s),delete i.instances[$n(this,Pn,"f")];var a=M("playerdestroyed");n.dispatchEvent(a)}},{key:"getContainer",value:function(){return $n(this,jn,"f").parentElement||$n(this,jn,"f")}},{key:"getControls",value:function(){return $n(this,On,"f")}},{key:"getCustomControls",value:function(){return $n(this,Kn,"f")}},{key:"getElement",value:function(){return $n(this,jn,"f")}},{key:"getEvents",value:function(){return $n(this,Nn,"f")}},{key:"getOptions",value:function(){return $n(this,Hn,"f")}},{key:"activeElement",value:function(){return $n(this,xn,"f")&&$n(this,xn,"f").started()?$n(this,xn,"f"):$n(this,Rn,"f")}},{key:"isMedia",value:function(){return this.activeElement()instanceof Ln}},{key:"isAd",value:function(){return this.activeElement()instanceof Un}},{key:"getMedia",value:function(){return $n(this,Rn,"f")}},{key:"getAd",value:function(){return $n(this,xn,"f")}},{key:"addCaptions",value:function(e){if(e.default)for(var t=$n(this,jn,"f").querySelectorAll("track"),i=0,n=t.length;i<n;i++)t[i].default=!1;var s=$n(this,jn,"f"),a=s.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));a?(a.src=e.src,a.label=e.label,a.default=e.default||!1):((a=document.createElement("track")).srclang=e.srclang,a.src=e.src,a.kind=e.kind,a.label=e.label,a.default=e.default||!1,s.appendChild(a));var r=M("controlschanged");s.dispatchEvent(r)}},{key:"addControl",value:function(e){e.custom=!0,e.type="button",$n(this,Kn,"f").push(e);var t=M("controlschanged");$n(this,jn,"f").dispatchEvent(t)}},{key:"addElement",value:function(e){e.custom=!0,$n(this,Kn,"f").push(e);var t=M("controlschanged");$n(this,jn,"f").dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this;$n(this,Kn,"f").forEach((function(i,n){i.id===e&&$n(t,Kn,"f").splice(n,1)}));var i=M("controlschanged");$n(this,jn,"f").dispatchEvent(i)}},{key:"_prepareMedia",value:function(){var e;return Gn(this,void 0,void 0,l().mark((function t(){var n,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(null===(e=$n(this,Hn,"f"))||void 0===e?void 0:e.onError)&&$n(this,jn,"f").addEventListener("playererror",$n(this,Hn,"f").onError,b),$n(this,In,"f")&&E($n(this,jn,"f"))&&$n(this,jn,"f").addEventListener("canplay",this._autoplay,b),Qn(this,Rn,new Ln($n(this,jn,"f"),$n(this,Hn,"f"),$n(this,In,"f"),i.customMedia),"f"),n=$n(this,jn,"f").getAttribute("preload"),!$n(this,Wn,"f")&&n&&"none"===n){t.next=9;break}return t.next=8,$n(this,Rn,"f").load();case 8:$n(this,Rn,"f").loaded=!0;case 9:!$n(this,In,"f")&&$n(this,Wn,"f")&&(s=$n(this,Hn,"f")&&$n(this,Hn,"f").ads?$n(this,Hn,"f").ads:void 0,Qn(this,xn,new Un(this,$n(this,Wn,"f"),!1,!1,s),"f")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})))}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,i=0;this.proxy&&!this.proxy.paused&&(t=!1,i=this.proxy.currentTime,this.proxy.pause()),this.proxy=this,this.getElement().addEventListener("loadedmetadata",(function(){e.getMedia().currentTime=i,t||e.play()}))}},{key:"loadAd",value:function(e){return Gn(this,void 0,void 0,l().mark((function t(){var i,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAd()?(this.getAd().destroy(),this.getAd().src=e,this.getAd().loadedAd=!1,this.getAd().load()):(i=$n(this,Hn,"f")&&$n(this,Hn,"f").ads?$n(this,Hn,"f").ads:void 0,n=!this.activeElement().paused||$n(this,Fn,"f"),Qn(this,xn,new Un(this,e,n,$n(this,Bn,"f"),i),"f"))}catch(e){console.error(e)}case 1:case"end":return t.stop()}}),t,this)})))}},{key:"src",get:function(){return $n(this,Rn,"f").src},set:function(e){var i=this;$n(this,Rn,"f")instanceof Ln?($n(this,Rn,"f").mediaFiles=[],$n(this,Rn,"f").src=e):"string"==typeof e?$n(this,jn,"f").src=e:Array.isArray(e)?e.forEach((function(e){var t=document.createElement("source");t.src=e.src,t.type=e.type||le(e.src,$n(i,jn,"f")),$n(i,jn,"f").appendChild(t)})):"object"===t(e)&&($n(this,jn,"f").src=e.src)}},{key:"id",get:function(){return $n(this,Pn,"f")}},{key:"_isValid",value:function(){var e=$n(this,jn,"f");return e instanceof HTMLElement!=!1&&(!(!w(e)&&!E(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=w($n(this,jn,"f"))?" op-player__audio":" op-player__video",e.tabIndex=0,$n(this,jn,"f").classList.remove("op-player"),$n(this,jn,"f").parentElement&&$n(this,jn,"f").parentElement.insertBefore(e,$n(this,jn,"f")),e.appendChild($n(this,jn,"f"));var t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),E($n(this,jn,"f"))&&$n(this,jn,"f").parentElement&&$n(this,jn,"f").parentElement.insertBefore(t,$n(this,jn,"f")),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),b),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),b),"fill"!==$n(this,Hn,"f").mode||w($n(this,jn,"f"))||h)if("fit"!==$n(this,Hn,"f").mode||w($n(this,jn,"f"))){var i="";if($n(this,Hn,"f").width){var n="number"==typeof $n(this,Hn,"f").width?"".concat($n(this,Hn,"f").width,"px"):$n(this,Hn,"f").width;i+="width: ".concat(n," !important;")}if($n(this,Hn,"f").height){var s="number"==typeof $n(this,Hn,"f").height?"".concat($n(this,Hn,"f").height,"px"):$n(this,Hn,"f").height;i+="height: ".concat(s," !important;")}i&&e.setAttribute("style",i)}else{var a=this.getContainer();if(a.parentElement){var r=document.createElement("div");r.className="op-player__fit--wrapper",r.tabIndex=0,a.parentElement.insertBefore(r,a),r.appendChild(a),a.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){h&&E($n(this,jn,"f"))&&this.getContainer().classList.add("op-player__ios--iphone"),Qn(this,On,new Nt(this),"f"),$n(this,On,"f").create()}},{key:"_createUID",value:function(){if($n(this,jn,"f").id)Qn(this,Pn,$n(this,jn,"f").id,"f"),$n(this,jn,"f").removeAttribute("id");else{var e=crypto,t="function"==typeof e.getRandomBytes?e.getRandomBytes:e.getRandomValues;Qn(this,Pn,"op_".concat(t(new Uint32Array(1))[0].toString(36).substr(2,9)),"f")}$n(this,jn,"f").parentElement&&($n(this,jn,"f").parentElement.id=$n(this,Pn,"f"))}},{key:"_createPlayButton",value:function(){var e,t,i=this;w($n(this,jn,"f"))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=(null===(e=$n(this,Hn,"f").labels)||void 0===e?void 0:e.play)||"",this.playBtn.innerHTML="<span>".concat((null===(t=$n(this,Hn,"f").labels)||void 0===t?void 0:t.play)||"","</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),$n(this,jn,"f").parentElement&&($n(this,jn,"f").parentElement.insertBefore(this.loader,$n(this,jn,"f")),$n(this,jn,"f").parentElement.insertBefore(this.playBtn,$n(this,jn,"f"))),this.playBtn.addEventListener("click",(function(){$n(i,xn,"f")&&($n(i,xn,"f").playRequested=i.activeElement().paused),i.activeElement().paused?i.activeElement().play():i.activeElement().pause()}),b))}},{key:"_setEvents",value:function(){var e=this;if(E($n(this,jn,"f"))){$n(this,Nn,"f").loadedmetadata=function(){var t=e.activeElement();!$n(e,Hn,"f").showLoaderOnInit||v||p?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},$n(this,Nn,"f").waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},$n(this,Nn,"f").seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof Ln?"false":"true")},$n(this,Nn,"f").seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof Ln?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},$n(this,Nn,"f").play=function(){var t;e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=(null===(t=$n(e,Hn,"f").labels)||void 0===t?void 0:t.pause)||"",e.loader.setAttribute("aria-hidden","true"),$n(e,Hn,"f").showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),$n(e,Hn,"f").hidePlayBtnTimer)},$n(this,Nn,"f").playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},$n(this,Nn,"f").pause=function(){var t,i=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=(null===(t=$n(e,Hn,"f").labels)||void 0===t?void 0:t.play)||"",$n(e,Hn,"f").showLoaderOnInit&&0===Math.round(i.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},$n(this,Nn,"f").ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")};var t=!1;$n(this,Nn,"f").timeupdate=function(){if($n(e,jn,"f").loop&&e.isMedia()&&$n(e,xn,"f")){var i=e.getMedia(),n=i.duration-i.currentTime;if(n>0&&n<=.25&&!t){t=!0;var s=M("ended");$n(e,jn,"f").dispatchEvent(s)}else 0===n&&(t=!1)}}}Object.keys($n(this,Nn,"f")).forEach((function(t){$n(e,jn,"f").addEventListener(t,$n(e,Nn,"f")[t],b)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,b)}},{key:"_autoplay",value:function(){var e,t,i,n,s,a,r=this;$n(this,qn,"f")||(Qn(this,qn,!0,"f"),$n(this,jn,"f").removeEventListener("canplay",this._autoplay),e=$n(this,jn,"f"),t=$n(this,Dn,"f"),i=function(e){Qn(r,Fn,e,"f")},n=function(e){Qn(r,Bn,e,"f")},s=function(){var e,t;if($n(r,Bn,"f")){r.activeElement().muted=!0,r.activeElement().volume=0;var i=M("volumechange");$n(r,jn,"f").dispatchEvent(i);var n=document.createElement("div"),s=v||p?null===(e=$n(r,Hn,"f").labels)||void 0===e?void 0:e.tap:null===(t=$n(r,Hn,"f").labels)||void 0===t?void 0:t.click;n.className="op-player__unmute",n.innerHTML="<span>".concat(s,"</span>"),n.tabIndex=0,n.addEventListener("click",(function(){r.activeElement().muted=!1,r.activeElement().volume=$n(r,Dn,"f");var e=M("volumechange");$n(r,jn,"f").dispatchEvent(e),n.remove()}),b);var a=r.getContainer();a.insertBefore(n,a.firstChild)}else r.activeElement().muted=$n(r,jn,"f").muted,r.activeElement().volume=$n(r,Dn,"f");if($n(r,Wn,"f")){var o=$n(r,Hn,"f")&&$n(r,Hn,"f").ads?$n(r,Hn,"f").ads:void 0;Qn(r,xn,new Un(r,$n(r,Wn,"f"),$n(r,Fn,"f"),$n(r,Bn,"f"),o),"f")}else($n(r,Fn,"f")||$n(r,Bn,"f"))&&r.play()},void 0!==(a=e.play())?a.then((function(){e.pause(),i(!0),n(!1),s()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){e.pause(),i(!0),n(!0),s()})).catch((function(){e.volume=t,e.muted=!1,i(!1),n(!1),s()}))})):(i(!e.paused||"Promise"in window&&a instanceof Promise),e.pause(),n(!1),s()))}},{key:"_mergeOptions",value:function(i){var n=this,s=Object.assign({},i||{});if(Qn(this,Hn,Object.assign(Object.assign({},$n(this,zn,"f")),s),"f"),Object.keys($n(this,zn,"f")).filter((function(e){return"labels"!==e&&"object"===t($n(n,zn,"f")[e])})).forEach((function(e){var t=s[e]||{};t&&Object.keys(t).length&&($n(n,Hn,"f")[e]=Object.assign(Object.assign({},$n(n,zn,"f")[e]),t))})),s.labels){var a=s.labels?Object.keys(s.labels):[],r={};a.forEach((function(i){var n=s.labels?s.labels[i]:null;n&&"object"===t(n)&&"lang"===i?Object.keys(n).forEach((function(t){var i=n?n[t]:null;i&&(r=Object.assign(Object.assign({},r),{lang:Object.assign(Object.assign({},r.lang),e({},t,A(i)))}))})):n&&(r=Object.assign(Object.assign({},r),e({},i,A(n))))})),$n(this,Hn,"f").labels=Object.assign(Object.assign({},$n(this,zn,"f").labels),r)}}},{key:"_enableKeyBindings",value:function(e){var t,i,n=e.which||e.keyCode||0,s=this.activeElement(),a=this.isAd(),r=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-player");switch(n){case 13:case 32:case 75:!r||13!==n&&32!==n?75===n&&(s.paused?s.play():s.pause()):s.paused?s.play():s.pause(),e.preventDefault(),e.stopPropagation();break;case 35:a||s.duration===1/0||(s.currentTime=s.duration,e.preventDefault(),e.stopPropagation());break;case 36:a||(s.currentTime=0,e.preventDefault(),e.stopPropagation());break;case 37:case 39:case 74:case 76:if(!a&&s.duration!==1/0){var o=5,l=this.getOptions().step;l?o=74===n||76===n?2*l:l:74!==n&&76!==n||(o=10);var f=s.duration!==1/0?o:(null===(i=this.getOptions().progress)||void 0===i?void 0:i.duration)||0;s.currentTime+=37===n||74===n?-1*f:f,s.currentTime<0?s.currentTime=0:s.currentTime>=s.duration&&(s.currentTime=s.duration),e.preventDefault(),e.stopPropagation()}break;case 38:case 40:var c=38===n?Math.min(s.volume+.1,1):Math.max(s.volume-.1,0);s.volume=c,s.muted=!(c>0),e.preventDefault(),e.stopPropagation();break;case 70:E($n(this,jn,"f"))&&!e.ctrlKey&&(Qn(this,Vn,new se(this,"",""),"f"),void 0!==$n(this,Vn,"f").fullScreenEnabled&&($n(this,Vn,"f").toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case 77:s.muted=!s.muted,s.muted?s.volume=0:s.volume=$n(this,Dn,"f"),e.preventDefault(),e.stopPropagation();break;case 188:case 190:if(!a&&e.shiftKey){var u=s;u.playbackRate=188===n?Math.max(u.playbackRate-.25,.25):Math.min(u.playbackRate+.25,2);var d=this.getContainer().querySelector(".op-status>span");d&&(d.textContent="".concat(u.playbackRate,"x"),d.parentElement&&d.parentElement.setAttribute("aria-hidden","false"),setTimeout((function(){d.parentElement&&d.parentElement.setAttribute("aria-hidden","true")}),500));var h=M("controlschanged");dispatchEvent(h),e.preventDefault(),e.stopPropagation()}else!a&&s.paused&&(s.currentTime+=.04*(188===n?-1:1),e.preventDefault(),e.stopPropagation())}}}],[{key:"init",value:function(){i.instances={};for(var e=document.querySelectorAll("video.op-player, audio.op-player"),t=0,n=e.length;t<n;t++){var s=e[t],a=s.getAttribute("data-op-settings");new i(s,a?JSON.parse(a):{}).init()}}},{key:"addMedia",value:function(e,t,n,s){i.customMedia.media[t]=s,i.customMedia.optionsKey[t]=e,i.customMedia.rules.push(n)}}]),i}();On=new WeakMap,xn=new WeakMap,Pn=new WeakMap,jn=new WeakMap,Wn=new WeakMap,Rn=new WeakMap,Nn=new WeakMap,In=new WeakMap,Dn=new WeakMap,Fn=new WeakMap,Bn=new WeakMap,qn=new WeakMap,Hn=new WeakMap,Kn=new WeakMap,Vn=new WeakMap,zn=new WeakMap,Jn.instances={},Jn.customMedia={media:{},optionsKey:{},rules:[]};var Yn=Jn;"undefined"!=typeof window&&(window.OpenPlayer=Jn,window.OpenPlayerJS=Jn,Jn.init())}(),n}()}));
//# sourceMappingURL=openplayer.min.js.map