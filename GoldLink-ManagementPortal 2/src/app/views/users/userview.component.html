<!-- Mobile Responsive Code for buttons and view -->
<style>

  @media (max-width: 700px) {
    .action-btn { 
    margin-top:3px !important;
    width:99% !important;
    }
    p {
      /*margin-top: revert;*/
      margin-bottom: revert;
    }
    .VideoSessionTitle {
      width: 203px;
    }

    .button-edit{
      margin-top: -1%;
    }

    td {
      padding-bottom: 12px;
    }

  }
  .button-edit{
      margin-top: -4px;
    }

  .sk-chase-dot:before{
    background-color: lightblue;
  }

  .btn-sq-lg {
  width: 145px !important;
  height: 145px !important;
  font-weight: 600 !important;
  line-height: 50px !important;
  margin-top: 5px;
  }

  .btn-sq {
    width: 100px !important;
    height: 100px !important;
    font-size: 10px;
    font-weight: 600 !important;
    line-height: 50px !important;
  }

  .btn-sq-sm {
    width: 50px !important;
    height: 50px !important;
    font-size: 10px;
  }

  .btn-sq-xs {
    width: 25px !important;
    height: 25px !important;
    padding:2px;
  }

</style>

<div [hidden]="isLoaded">
  <!-- loading visual, it sometimes takes a few seconds to get the token (in testing/sandbox) -->
  <div style="z-index:9;">
    <svg class="loader" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
      <circle class="internal-circle" cx="60" cy="60" r="30"></circle>
    </svg>
  </div>
</div>
<div class="animated fadeIn" [hidden]="!isLoaded">

  <div class="card" *ngIf="userresponsetype==1">
    <div class="card-header" style="background-color:#f0f3f585">
      <span>View User Profile</span> &nbsp; <button type="button" class="btn btn-block btn-link button-edit" style="color:#20a8d8;background-color:white;" (click)="gotoEdit()" tooltip="Click to edit user" style="width:fit-content;display:inline-block;">Edit <i class='cil-pencil c-icon c-icon-3xl c-icon-fix'></i></button>
      <button *ngIf="getAccessLevel() >= 5" type="button" class="btn btn-block btn-link button-edit" data-toggle="modal" (click)="smallModal.show()" tooltip="Click to remove this user" style="width:fit-content;display:inline-block;color:#d85420;margin-left:-1px;">Remove <i class='cil-delete c-icon c-icon-3xl c-icon-fix' style="font-size:11px;"></i></button>
      
      <div class="card-header-actions">
        &nbsp;
      </div>
    </div>
    <div class="card-body" [collapse]="isCollapsed">
      <p><b>Name:</b> {{user.displaynametitle}} {{user.displaynamefirst}} {{user.displaynamelast}}</p>
      <p *ngIf="user.phone.length>0"><b>Phone:</b> {{user.phone}}</p>
      <p *ngIf="user.email.length>0"><b>Email:</b> {{user.email}}</p>
      <p *ngIf="user.companies"><b>Company:</b> {{user.companies[0].name}}</p>
      <p style="display:inline-block;width:fit-content;"><b>Status:</b> {{user.statusname}}</p> &nbsp;
    
      <hr/>

      <div *ngIf="getAccessLevel() >= 5">
        <h5 style="margin-bottom:12px;display:inline-block;">Access Credentials</h5> <button *ngIf="!revealCredentialsBool" type="button" class="btn btn-block btn-link button-edit" style="color:#20a8d8;background-color:white;display:inline-block;" (click)="revealCredentials()" tooltip="Click to reveal credentials" style="width:fit-content;font-size:12px;display:inline-block;">Reveal <i class='cil-fingerprint c-icon c-icon-fix'></i></button> <button *ngIf="revealCredentialsBool" type="button" class="btn btn-block btn-link button-edit" style="color:#20a8d8;background-color:white;display:inline-block;" (click)="revealCredentials()" tooltip="Click to hide credentials" style="width:fit-content;font-size:12px;display:inline-block;">Hide <i class='cil-eye c-icon c-icon-fix'></i></button>
        <p *ngIf="!revealCredentialsBool"><i>Hidden</i></p>
        <div *ngIf="revealCredentialsBool"> 
          <p *ngIf="user.user"><b>Username:</b> {{user.user}}</p>
          <p *ngIf="user.pass" style="margin-top:-12px"><b>Password:</b> {{user.pass}}</p>
        </div>
      </div>
      
      <!--<div class="row" style="margin-left:0px;margin-right:0px;">
        <p tooltip='Actions&#013;' style='margin-bottom:3px;' class="VideoSessionTitle"><b>Actions:</b></p>
        <button type="button" class="btn btn-block btn-link action-btn" (click)="gotouserVideoRoom()" tooltip="Click to join or prepare a video session for this user." style="position:relative;width:fit-content;margin-top:-8px;font-size:15px;">Start a Session<i class='cil-external-link c-icon c-icon-3xl c-icon-fix' style="font-size:16px"></i></button>
        <button type="button" class="btn btn-block btn-link action-btn" data-toggle="modal" (click)="primaryModal.show()" tooltip="Click to copy URL to clipboard, sending this to others will allow them to join the session." style="position:relative;width:fit-content;margin-top:-8px;font-size:15px;">Share Session Link<i class='cil-clipboard c-icon c-icon-3xl c-icon-fix' style="font-size:16px"></i></button>
        <button type="button" class="btn btn-block btn-link action-btn" (click)="gotouserCalendarRoom()" tooltip="Click to view calendar events for this user." style="position:relative;width:fit-content;margin-top:-8px;font-size:15px;">View Scheduling<i class='cil-calendar c-icon c-icon-3xl c-icon-fix' style="font-size:16px"></i></button>
      </div>-->

      <!-- Begin actions -->
      <!--<hr/>
        <div class="row" style="justify-content: center;">
          <div class="col-sm-1" style="max-width:fit-content;">
          <button type="button" class="btn btn-block btn-link" style="color:#20a8d8;background-color:white;" (click)="gotoEdit()" tooltip="Click to edit user" style="width:fit-content;font-size:11px;">Edit user<i class='cil-pencil c-icon c-icon-3xl c-icon-fix'></i></button>
          </div>
          <div class="col-sm-1" style="max-width:fit-content;">
          <button type="button" class="btn btn-block btn-link" style="color:#20a8d8;background-color:white;" [disabled]="true" tooltip="Click to merge bank accounts from another user" style="width:fit-content;font-size:11px;">Merge user(s)<i class='cil-library-add c-icon c-icon-3xl c-icon-fix'></i></button>
          </div>
        </div>-->
      <!-- End actions -->

      <!-- Begin modal -->
      <div bsModal #primaryModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-primary" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Share Session Link</h4>
              <!--<button type="button" class="close" (click)="primaryModal.hide()" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>-->
            </div>
            <div class="modal-body">
              <div class="col-lg-12">
                <p>
                  <a [routerLink]="" class="btn btn-sq-lg btn-success" (click)="SenduserEmail()">
                    <i class="cil-send c-icon c-icon-3xl c-icon-fix" style="font-size:20px"></i><br/>
                    Send Email<br>
                  </a>
                  <a [routerLink]="" class="btn btn-sq-lg btn-info" style="color:white;" (click)="SenduserText()">
                    <i class="cil-screen-smartphone c-icon c-icon-3xl c-icon-fix" style="font-size:20px"></i><br/>
                    Send Text<br>
                  </a>
                  <a [routerLink]="" class="btn btn-sq-lg btn-primary" (click)="copyuserVideoURL()">
                    <i class="cil-clipboard c-icon c-icon-3xl c-icon-fix" style="font-size:20px"></i><br/>
                    Copy to Clipboard<br>
                  </a>
                </p>
                <hr/>
                <p>Click options above to share session.</p>

                <p *ngIf="emailresponsetype>0"> 
                  &nbsp;
                  <strong style="font-size:10px;color:red;" [hidden]="emailresponsetype!=3">Email failed to send</strong>
                  <strong style="font-size:10px;color:green;" [hidden]="emailresponsetype!=4">Email was sent!</strong>
                  <strong style="font-size:10px;color:red;" [hidden]="emailresponsetype!=5">No email to send to.</strong>
                </p>
                <p *ngIf="textresponsetype>0"> 
                  &nbsp;
                  <strong style="font-size:10px;color:red;" [hidden]="textresponsetype!=3">Text failed to send</strong>
                  <strong style="font-size:10px;color:green;" [hidden]="textresponsetype!=4">Text was sent!</strong>
                  <strong style="font-size:10px;color:red;" [hidden]="textresponsetype!=5">No phone# to send to.</strong>
                </p>

              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="primaryModal.hide()">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
      <!-- End modal -->

      <!-- Begin modal -->
      <div bsModal #smallModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Confirm Irreversible Action</h4>
            </div>
            <div class="modal-body">
              <p>Do you want to remove this user?</p>
              <p>None of this data will be retained.</p>
              <p>The same user can be re-added afterwards.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" (click)="deleteCurrentuser()">Remove</button>
              <button type="button" class="btn btn-secondary" (click)="smallModal.hide()">Close</button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
      <!-- End modal -->


    </div>
    <!--<div class="card-footer">
      <button type="button" class="btn btn-primary" (click)="isCollapsed = !isCollapsed">Collapse</button>
    </div>-->
  </div>


  <div class="card" *ngIf="userclients.length>0">
    <tabset>
      <tab>
        <ng-template tabHeading><i class="icon-users"></i> Clients</ng-template>
        <i>List of clients involved with this user (total: {{userclients.length}})</i><br/><br/>
       
        <div *ngFor="let client of userclients">
        Name: <b>{{client.name}}</b>
        <br/><span *ngIf="client.type!=='Private'"> Profile: <a [routerLink]="" (click)="gotoClient(client.id)">View</a> </span>
        <span *ngIf="client.type==='Private'"> Profile: <i>Profile set to be Private or Independent.</i> </span>
        <br/><br/>
        </div>
      </tab>
    </tabset>
  </div>

</div>
