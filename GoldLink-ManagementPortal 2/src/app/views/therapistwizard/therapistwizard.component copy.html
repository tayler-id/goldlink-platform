<div class="app-body">
  <main class="main d-flex align-items-center">
    <div class="container">
      <div class="row">
        <div class="col-md-8 mx-auto">
          <div class="card-group">

            <div class="card text-white bg-primary py-5">
              <div class="card-body text-center">
                <div>
                  <h2>Link Bank Account</h2>
                  <p></p>
                  <button type="button" class="btn btn-primary active mt-3" >Sign up</button>
                </div>
              </div>
            </div>

            <div class="card p-4">
              <div class="card-body">
                <form>
                  <h1>or..</h1>
                  <p class="text-muted">Add More Accounts</p>
                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="icon-user"></i></span>
                    </div>
                    <input type="text" class="form-control" placeholder="Email" autocomplete="email" id="emaillogin" maxlength="127" required>
                  </div>
                  <div class="input-group mb-4">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="icon-lock"></i></span>
                    </div>
                    <input type="password" class="form-control" placeholder="Emailed Security Code" autocomplete="current-password" maxlength="6" required>
                  </div>
                  <div class="row">
                    <div class="col-6">
                      <button type="button" class="btn btn-primary px-4" >Sign in</button>
                    </div>
                    <div class="col-6 text-right">
                      <button type="button" class="btn btn-link px-0" >Forgot password?</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </main>
</div>


<div class="app-body">
  <main class="main d-flex align-items-center">
    <div class="container">
      <div class="row">
        <div class="col-md-6 mx-auto">
          <div class="card mx-4" [hidden]="currentstep != 0">
            <div class="card-body p-4">
              <!--<form>-->
                <h1>Step 1</h1>
                <p class="text-muted">Add your email (should be valid and reachable)</p>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                    <span class="input-group-text">@</span>
                  </div>
                  <input type="text" class="form-control" placeholder="Email" autocomplete="email" (keyup)="steponevalidation()" id="emailstepone" maxlength="127" required>
                  <!--<div class="valid-feedback">
                    Looks good!
                  </div>-->
                  <div *ngIf="responsetype==3">
                    <br>
                    <alert type="warning">
                    This email was not found in the system, and self-registration is not enabled, please contact us first.
                    </alert>
                  </div>
                </div>

                <!-- loading visual, it sometimes takes a few seconds to get the token (in testing/sandbox) -->
                <div *ngIf="loadingOptionalFields" style="position:absolute;left:35%;z-index:9;">
                <svg class="loader" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                  <circle class="internal-circle" cx="60" cy="60" r="30"></circle>
                </svg>
                </div>

                <div *ngIf="filloptionalfields.length>0">
                  <br/>
                  <p class="text-muted" style="width:fit-content;"><i>Optional</i>: fill in missing fields below</p>
                  <div class="form-group row" [hidden]="!filloptionalfields.includes(1)">
                    <label for="name" class="col-md-2 col-form-label" style="word-wrap:normal;"><i>Name</i></label>
                    <div class="col-md-10">
                      <input type="text" id="name" placeholder="Enter Name.." autocomplete="name" class="form-control" maxlength=63 (change)="stepsoptionalvalidation()" (keyup)="stepsoptionalvalidation()">
                      <!--<div class="valid-feedback">
                      Looks good!
                      </div>-->
                      <div class="invalid-feedback">
                        Please provide valid information. (Only a-z,A-Z,0-9)
                      </div>
                    </div>
                  </div>
                  <div class="form-group row" [hidden]="!filloptionalfields.includes(2)">
                    <label for="address" class="col-md-2 col-form-label" style="word-wrap:normal;"><i>Address</i></label>
                    <div class="col-md-10">
                      <input type="text" id="address" placeholder="Enter Address.." autocomplete="address" class="form-control" maxlength=63 (change)="stepsoptionalvalidation()" (keyup)="stepsoptionalvalidation()">
                      <!--<div class="valid-feedback">
                      Looks good!
                      </div>-->
                      <div class="invalid-feedback">
                        Please provide valid information. (Only a-z,A-Z,0-9)
                      </div>
                    </div>
                  </div>
                  <div class="form-group row" [hidden]="!filloptionalfields.includes(3)">
                    <label for="phone" class="col-md-2 col-form-label" style="word-wrap:normal;"><i>Phone</i></label>
                    <div class="col-md-10">
                      <input type="in" id="phone" placeholder="(xxx)xxx-xxxx" autocomplete="phone" class="form-control" maxlength=16 (change)="stepsoptionalvalidation()" (keyup)="stepsoptionalvalidation()">
                      <!--<div class="valid-feedback">
                      Looks good!
                      </div>-->
                    </div>
                  </div>
                </div>

                <button type="button" class="btn btn-block btn-success" (click)="NextLinkStep()" [disabled]="!emailisvalid">Continue</button>
              <!--</form>-->
            </div>
            <!--<div class="card-footer p-4">
              <div class="row">
                <div class="col-6">
                  <button class="btn btn-block btn-facebook" type="button"><span>facebook</span></button>
                </div>
                <div class="col-6">
                  <button class="btn btn-block btn-twitter" type="button"><span>twitter</span></button>
                </div>
              </div>
            </div>-->
            <!-- add link for https://plaid.com/how-it-works-for-consumers/ -->
          </div>

          <div class="card mx-4" [hidden]="currentstep != 1">
            <div class="card-body p-4">
              
              <form>
                <h1>Step 2</h1>
                <p class="text-muted">Login using Plaid <strong title="Opens an explanation on the official benefits of Plaid (in new window)">(<a href="https://plaid.com/how-it-works-for-consumers/" target="_blank">?</a>)</strong> </p>
                <div class="input-group mb-3">
                  <!-- add table or some other indicator of linked account(s)? nah -->

                  <!-- loading visual, it sometimes takes a few seconds to get the token (in testing/sandbox) -->
                  <div *ngIf="loadingToken" style="position:absolute;left:35%;z-index:9;">
                  <svg class="loader" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
                    <circle class="internal-circle" cx="60" cy="60" r="30"></circle>
                  </svg>
                  </div>
                  
                  <button type="button" class="btn btn-block btn-info" (click)="GetPlaidToken()" *ngIf="!accountsarelinked" style="min-height:48px;">Link Bank Account</button>
                  <button type="button" class="btn btn-block btn-info" (click)="GetPlaidToken()" *ngIf="accountsarelinked" style="min-height:48px;">Link Another Bank</button>
                </div>

                <alert type="info" *ngIf="!accountsarelinked; else showacntslinked">
                  <strong>Welcome,</strong> you have not linked any accounts yet on this session.
                </alert>
                <ng-template #showacntslinked> <alert type="success">You have successfully linked <strong>{{numAccounts}}</strong> account(s).</alert></ng-template> <!-- possibly can add a # to this like # linked total -->
                <button type="submit" class="btn btn-block btn-success" (click)="NextLinkFinalStep()" [hidden]="!accountsarelinked" [disabled]="!accountsarelinked">Continue</button>

              </form>
            </div>
          </div>


          <div class="card mx-4" [hidden]="currentstep != 2">
            <div class="card-body p-4">
              <form>
                <h1>Thank you!</h1>
                <p class="text-muted"></p>
                <alert type="success">All done!</alert>
                <!--<p>We will be in touch shortly if the funding requirements were met!</p>-->
                <br/><p><a href="https://www.KodiakFunding.com">Click to go back to Kodiak Funding</a></p>
              </form>
            </div>

            <!--<div class="card-footer p-4">
              <div class="row">
                <div class="col-3">
                  <button type="button" class="btn btn-brand btn-sm btn-facebook mr-1" style="margin-bottom: 4px;width:100px;"><i class="fa fa-facebook"></i><span>Facebook</span></button>
                </div>
                <div class="col-3">
                  <button type="button" class="btn btn-brand btn-sm btn-twitter mr-1" style="margin-bottom: 4px;"><i class="fa fa-twitter"></i><span>Twitter</span></button>
                </div>
              </div>
            </div>-->
          </div>

        </div>
      </div>
    </div>
  </main>
</div>
